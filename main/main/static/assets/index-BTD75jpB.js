import{r as d,d as Xe,u as G,b as v,j as e,B as i,I as et,n as O,Y as _s,a6 as Ps,z as Q,a7 as tt,a8 as As,a9 as we,aa as st,ab as Ut,N as at,ac as Ne,ad as Fe,ae as Ze,af as $s,ag as Os,ah as Gs,ai as Bs,aj as Ns,L as ke,ak as Fs,T as ie,m as nt,k as X,l as Qt,al as Zs,am as Us,an as Qs,ao as Wt,ap as Ws,aq as Ue,ar as ft,as as _e,e as Re,at as bt,f as Vt,C as xt,c as Vs,a as Ys,Z as H,au as Qe,i as Yt,av as Js,O as Ks,M as Jt,aw as qs,y as Xs,E as ea,K as ta,ax as sa,S as aa,ay as na,az as ae,a5 as la,aA as oa,aB as ia,aC as ra,aD as ca,aE as da,aF as ua,aG as ha,aH as ga}from"./vendor-Dg9ap9Na.js";import{s as M,f as _,g as Kt,F as P,T as Z,a as De,d as fa,w as ba,b as Oe,c as qt,e as Ee,h as me,i as Xt,j as es,k as Ke,l as xa,m as ne,G as N,n as A,C as ma,o as pa,p as ve,I as oe,q as W,B as ts,r as ss,t as lt,u as ot,L as D,S as as,v as ns,x as ya,y as va,D as ls,z as wa,A as ja,E as He,H as Ta,J as Ie,K as Sa,M as os,N as it,O as La,V as is,P as re,Q as Ca,R as Da,U as rs,W as za,X as Ea,Y as ka,Z as Ra,_ as Ha,$ as Ia,a0 as qe,a1 as Ma,a2 as Ge,a3 as cs,a4 as _a,a5 as rt,a6 as ct,a7 as Pe,a8 as mt,a9 as ds,aa as us,ab as hs,ac as gs,ad as fs,ae as bs,af as xs,ag as ms,ah as ps,ai as ys,aj as vs,ak as ws,al as js,am as Ts,an as Ss,ao as Pa,ap as Aa,aq as $a,ar as Oa,as as Ga,at as Ba,au as Na,av as Fa,aw as Za,ax as Ua,ay as Qa,az as Wa,aA as Va,aB as Ya,aC as Ja,aD as Ka,aE as qa,aF as Xa,aG as en,aH as tn,aI as sn,aJ as Y,aK as Te,aL as ce,aM as Se,aN as de,aO as an,aP as nn,aQ as ln,aR as on,aS as rn,aT as cn,aU as dn,aV as un,aW as hn,aX as gn,aY as fn,aZ as bn,a_ as xn,a$ as mn,b0 as pn,b1 as yn,b2 as vn,b3 as wn,b4 as jn,b5 as Tn,b6 as Sn,b7 as pt,b8 as We,b9 as Ln,ba as Cn,bb as Dn,bc as yt,bd as vt,be as zn,bf as En,bg as kn,bh as Rn,bi as Hn,bj as In,bk as wt,bl as jt,bm as Mn,bn as _n,bo as Pn,bp as Tt,bq as St,br as An,bs as $n,bt as On,bu as Lt,bv as Ct,bw as Gn,bx as Bn,by as Nn,bz as Dt,bA as zt,bB as Fn,bC as Zn,bD as Un,bE as Et,bF as kt,bG as Qn,bH as Wn,bI as Vn,bJ as Rt,bK as Ht,bL as Yn,bM as Jn,bN as Kn,bO as qn,bP as Xn,bQ as el,bR as It,bS as Mt,bT as tl,bU as sl,bV as al,bW as _t,bX as Pt,bY as nl,bZ as ll,b_ as ol,b$ as At,c0 as $t,c1 as il,c2 as Ls,c3 as rl,c4 as Ot,c5 as Cs,c6 as Ds,c7 as zs,c8 as ze,c9 as Gt,ca as cl,cb as dl,cc as ul,cd as hl,ce as gl,cf as fl,cg as bl,ch as xl,ci as ml,cj as pl,ck as yl,cl as vl,cm as wl,cn as jl,co as Tl,cp as Sl,cq as Ll,cr as Cl,cs as Dl,ct as zl,cu as El,cv as kl,cw as Rl,cx as Hl,cy as Il,cz as Ml,cA as _l,cB as Pl,cC as Al,cD as $l,cE as Ol,cF as Gl,cG as Bl,cH as Nl,cI as Fl,cJ as Zl}from"./components-CX-WkkHt.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))f(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&f(r)}).observe(document,{childList:!0,subtree:!0});function u(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function f(s){if(s.ep)return;s.ep=!0;const l=u(s);fetch(s.href,l)}})();const Ul="_box_eda9k_1",Ql="_wobble_eda9k_1",Wl="_cardContent_eda9k_11",Vl="_cardAnim_eda9k_1",Bt={box:Ul,wobble:Ql,cardContent:Wl,cardAnim:Vl},Yl=({item:t,index:c})=>{const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const m=window.matchMedia(M);return m.addEventListener("change",j=>_(f,j.matches)),()=>m.removeEventListener("change",_)},[]);const s=Xe(),l=G(),r=v(Kt),[x,y]=d.useState(null);d.useLayoutEffect(()=>{setTimeout(()=>{y(e.jsx(i,{sx:{margin:"1%",padding:"2px",border:"2px solid #003274",borderRadius:"5px",boxShadow:"2px 2px 2px gray",...P,fontSize:u?"0.8em":"1.1em","&:hover":{transform:"scale(1.01)",...Z,cursor:"pointer"},"&:active":{transform:"scale(0.99)",boxShadow:"0px 0px 0px gray",...Z}},className:Bt.box,onClick:()=>o(t),children:e.jsxs(i,{className:Bt.cardContent,children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(et,{src:t.level===De.dangerousTitle?fa:ba,width:20,height:20}),e.jsxs(i,{children:[t.asset," ",t.substation]})]}),e.jsx(i,{children:t.date.replace("T"," ").replace("Z","").split(".")[0]}),e.jsx(i,{children:t.msg})]})},O()))},c*150)},[]);const o=m=>{l(Oe({asset:m.asset,elementId:m.asset_id,elementType:m.asset_type,substId:m.substId}));const j=r.find(a=>a.id===m.substId);l(qt({assets:j.assets,subst_id:j.id,name:j.name})),l(Ee(m.id_tab)),l(me("charts")),l(Xt(m.signals)),l(es(`${new Date(m.date).addHours(4).toLocaleDateString().split(".").reverse().join("-")}T${new Date(m.date).addHours(4).toLocaleTimeString()}`)),l(Ke(`${new Date(m.date).addHours(-4).toLocaleDateString().split(".").reverse().join("-")}T${new Date(m.date).addHours(-4).toLocaleTimeString()}`)),s(`/substation/${m.substId}/${m.asset_type}/${m.asset_id}/charts`)};return e.jsx(e.Fragment,{children:x})},Jl=({height:t})=>{const[c,u]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const a=window.matchMedia(M);return a.addEventListener("change",w=>_(u,w.matches)),()=>a.removeEventListener("change",_)},[]);const f=d.useRef(),s=94,l=v(xa),r=v(ne),x=v(N),[y,o]=d.useState(),[m,j]=d.useState();if(d.useEffect(()=>{try{if(l){let a=l.map((w,S)=>e.jsx(Yl,{item:w,index:S},O()));o(a),j(a.length)}}catch(a){console.log("EVENTS ERROR"),console.log(a)}},[l,r]),x)return e.jsxs(i,{ref:f,sx:{width:"100%",height:"100%",color:"#003274"},children:[e.jsxs(i,{sx:{...A,fontSize:c?"0.9em":"1.2em",display:"flex",alignItems:"center"},children:[x.eventsLabel,e.jsx(_s,{color:"gray",variant:"filled",styles:{root:{margin:"5px",border:"50%"}},children:m})]}),e.jsx(Ps,{h:t/100*s,children:e.jsx(i,{sx:{marginRight:"2%"},children:y})})]})},dt=()=>{const[t,c]=d.useState(window.matchMedia("(min-height:600px) and (max-height:900px)").matches);return d.useEffect(()=>{const u=window.matchMedia("(min-height:600px) and (max-height:900px)"),f=s=>c(s);return u.addEventListener("change",s=>f(s.matches)),()=>{u.removeEventListener("change",f)}},[]),t?"md":"lg"},Kl=d.memo(()=>{const t=v(N),c=dt(),u=d.useMemo(()=>{const f=[];return ma.forEach(s=>{f.push(e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(i,{sx:{width:c=="md"?"10px":"18px",height:c=="md"?"10px":"18px",background:s.color}}),e.jsx(i,{sx:{...P,marginLeft:"5px",fontSize:c=="md"?"0.6em":"0.9em"},children:s.impotantLevel})]},O()))}),f},[]);return e.jsxs(i,{sx:{...Z},children:[e.jsx(i,{sx:{...A,fontSize:c=="md"?"0.8em":"1em"},children:t.importanceLevelsLabel}),u]})}),ql=d.memo(()=>{const t=dt(),c=v(pa),u=v(N),f=d.useMemo(()=>{try{if(c)return Object.keys(c).map(l=>e.jsxs(i,{sx:{fontSize:t=="md"?"0.6em":"0.9em",...P},children:[l," - ",c[l].length]},O()))}catch(s){console.log("ERROR INFO MAP"),console.log(s)}},[c]);return e.jsxs(i,{sx:{color:"#003274",fontSize:"1em"},children:[e.jsx(i,{sx:{...A,fontSize:t=="md"?"0.8em":"1em"},children:u.totalLabel}),f]})}),Xl=()=>{const t=dt(),c=v(ne),u=v(N),f=v(Kt),[s,l]=d.useState(),[r,x]=d.useState();if(d.useEffect(()=>{try{let m=[];if(f){const j=f.map(a=>a.assets).flat();m.push({name:"Dangerous",count:j.filter(a=>a.status==De.dangerousTitle).length,color:ve.dangerousColor}),m.push({name:"Warning",count:j.filter(a=>a.status==De.warningTitle).length,color:ve.warningColor}),m.push({name:"Good",count:j.filter(a=>a.status==De.goodTitle).length,color:ve.goodColor}),m.push({name:"Undefined",count:j.filter(a=>a.status==De.undefinedTitle).length,color:ve.undefinedColor}),m=m.filter(a=>a.count!=0)}var y=[{values:m.map(j=>j.count),labels:m.map(j=>j.name),domain:{column:0},name:"",hole:.4,type:"pie",marker:{colors:m.map(j=>j.color)},textinfo:"value",hoverinfo:"none"}],o={height:t=="md"?100:150,width:t=="md"?200:300,showlegend:!1,margin:{t:0,r:0,b:0,l:0}};x(y),l(o)}catch(m){console.log("INFO MAP ERROR"),console.log(m)}},[f,c]),u)return e.jsxs(i,{sx:{marginLeft:"1%",display:"flex",height:"100%"},children:[e.jsx(Kl,{}),e.jsxs(i,{sx:{textAlign:"center",...A,...Z,fontSize:t=="md"?"0.8em":"1em"},children:[e.jsx(i,{children:u==null?void 0:u.currentStateLabel}),e.jsx(Q,{data:structuredClone(r),layout:structuredClone(s),config:{displayModeBar:!1,scrollZoom:!1,scale:1,displaylogo:!1}})]}),e.jsx(ql,{})]})},eo="data:image/svg+xml,%3csvg%20width='512'%20height='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3ctitle%3eLayer%201%3c/title%3e%3cpath%20stroke='%23000'%20fill='rgba(1,%2050,%2032,%200.8)'%20d='m256.00001,3c-90.84788,0%20-164.50002,66.44962%20-164.50002,148.4134c0,81.98356%20164.50002,358.58655%20164.50002,358.58655s164.50002,-276.60299%20164.50002,-358.58655c0,-81.96377%20-73.63021,-148.4134%20-164.50002,-148.4134zm0,219.33521c-43.40608,0%20-78.60908,-31.74068%20-78.60908,-70.92181s35.203,-70.92181%2078.60908,-70.92181s78.60908,31.76047%2078.60908,70.92181s-35.203,70.92181%20-78.60908,70.92181z'%20id='svg_1'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",to="data:image/svg+xml,%3csvg%20width='512'%20height='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3ctitle%3eLayer%201%3c/title%3e%3cpath%20stroke='%23000'%20fill='rgba(0,%20128,%200,%200.8)'%20d='m256.00001,3c-90.84788,0%20-164.50002,66.44962%20-164.50002,148.4134c0,81.98356%20164.50002,358.58655%20164.50002,358.58655s164.50002,-276.60299%20164.50002,-358.58655c0,-81.96377%20-73.63021,-148.4134%20-164.50002,-148.4134zm0,219.33521c-43.40608,0%20-78.60908,-31.74068%20-78.60908,-70.92181s35.203,-70.92181%2078.60908,-70.92181s78.60908,31.76047%2078.60908,70.92181s-35.203,70.92181%20-78.60908,70.92181z'%20id='svg_1'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",so="data:image/svg+xml,%3csvg%20width='512'%20height='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3ctitle%3eLayer%201%3c/title%3e%3cpath%20stroke='%23000'%20fill='rgba(144,%20238,%20144,%200.8)'%20d='m256.00001,3c-90.84788,0%20-164.50002,66.44962%20-164.50002,148.4134c0,81.98356%20164.50002,358.58655%20164.50002,358.58655s164.50002,-276.60299%20164.50002,-358.58655c0,-81.96377%20-73.63021,-148.4134%20-164.50002,-148.4134zm0,219.33521c-43.40608,0%20-78.60908,-31.74068%20-78.60908,-70.92181s35.203,-70.92181%2078.60908,-70.92181s78.60908,31.76047%2078.60908,70.92181s-35.203,70.92181%20-78.60908,70.92181z'%20id='svg_1'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",ao="data:image/svg+xml,%3csvg%20width='512'%20height='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3ctitle%3eLayer%201%3c/title%3e%3cpath%20stroke='%23000'%20fill='rgba(255,%20255,%200,%200.8)'%20d='m256.00001,3c-90.84788,0%20-164.50002,66.44962%20-164.50002,148.4134c0,81.98356%20164.50002,358.58655%20164.50002,358.58655s164.50002,-276.60299%20164.50002,-358.58655c0,-81.96377%20-73.63021,-148.4134%20-164.50002,-148.4134zm0,219.33521c-43.40608,0%20-78.60908,-31.74068%20-78.60908,-70.92181s35.203,-70.92181%2078.60908,-70.92181s78.60908,31.76047%2078.60908,70.92181s-35.203,70.92181%20-78.60908,70.92181z'%20id='svg_1'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",no="data:image/svg+xml,%3csvg%20width='512'%20height='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3ctitle%3eLayer%201%3c/title%3e%3cpath%20stroke='%23000'%20fill='rgba(255,%20187,%2015,%200.8)'%20d='m256.00001,3c-90.84788,0%20-164.50002,66.44962%20-164.50002,148.4134c0,81.98356%20164.50002,358.58655%20164.50002,358.58655s164.50002,-276.60299%20164.50002,-358.58655c0,-81.96377%20-73.63021,-148.4134%20-164.50002,-148.4134zm0,219.33521c-43.40608,0%20-78.60908,-31.74068%20-78.60908,-70.92181s35.203,-70.92181%2078.60908,-70.92181s78.60908,31.76047%2078.60908,70.92181s-35.203,70.92181%20-78.60908,70.92181z'%20id='svg_1'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",lo="data:image/svg+xml,%3csvg%20width='512'%20height='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3ctitle%3eLayer%201%3c/title%3e%3cpath%20stroke='%23000'%20fill='rgba(255,%20165,%200,%200.8)'%20d='m256.00001,3c-90.84788,0%20-164.50002,66.44962%20-164.50002,148.4134c0,81.98356%20164.50002,358.58655%20164.50002,358.58655s164.50002,-276.60299%20164.50002,-358.58655c0,-81.96377%20-73.63021,-148.4134%20-164.50002,-148.4134zm0,219.33521c-43.40608,0%20-78.60908,-31.74068%20-78.60908,-70.92181s35.203,-70.92181%2078.60908,-70.92181s78.60908,31.76047%2078.60908,70.92181s-35.203,70.92181%20-78.60908,70.92181z'%20id='svg_1'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",oo="data:image/svg+xml,%3csvg%20width='512'%20height='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3ctitle%3eLayer%201%3c/title%3e%3cpath%20stroke='%23000'%20fill='rgba(255,%20104,%200,%200.8)'%20d='m256.00001,3c-90.84788,0%20-164.50002,66.44962%20-164.50002,148.4134c0,81.98356%20164.50002,358.58655%20164.50002,358.58655s164.50002,-276.60299%20164.50002,-358.58655c0,-81.96377%20-73.63021,-148.4134%20-164.50002,-148.4134zm0,219.33521c-43.40608,0%20-78.60908,-31.74068%20-78.60908,-70.92181s35.203,-70.92181%2078.60908,-70.92181s78.60908,31.76047%2078.60908,70.92181s-35.203,70.92181%20-78.60908,70.92181z'%20id='svg_1'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",io="data:image/svg+xml,%3csvg%20width='512'%20height='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3ctitle%3eLayer%201%3c/title%3e%3cpath%20stroke='%23000'%20fill='rgba(222,%2049,%2099,%200.8)'%20d='m256.00001,3c-90.84788,0%20-164.50002,66.44962%20-164.50002,148.4134c0,81.98356%20164.50002,358.58655%20164.50002,358.58655s164.50002,-276.60299%20164.50002,-358.58655c0,-81.96377%20-73.63021,-148.4134%20-164.50002,-148.4134zm0,219.33521c-43.40608,0%20-78.60908,-31.74068%20-78.60908,-70.92181s35.203,-70.92181%2078.60908,-70.92181s78.60908,31.76047%2078.60908,70.92181s-35.203,70.92181%20-78.60908,70.92181z'%20id='svg_1'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",ro="data:image/svg+xml,%3csvg%20width='512'%20height='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3ctitle%3eLayer%201%3c/title%3e%3cpath%20stroke='%23000'%20fill='rgba(255,%2036,%200,%200.8)'%20d='m256.00001,3c-90.84788,0%20-164.50002,66.44962%20-164.50002,148.4134c0,81.98356%20164.50002,358.58655%20164.50002,358.58655s164.50002,-276.60299%20164.50002,-358.58655c0,-81.96377%20-73.63021,-148.4134%20-164.50002,-148.4134zm0,219.33521c-43.40608,0%20-78.60908,-31.74068%20-78.60908,-70.92181s35.203,-70.92181%2078.60908,-70.92181s78.60908,31.76047%2078.60908,70.92181s-35.203,70.92181%20-78.60908,70.92181z'%20id='svg_1'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",co="data:image/svg+xml,%3csvg%20width='512'%20height='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3ctitle%3eLayer%201%3c/title%3e%3cpath%20stroke='%23000'%20fill='rgba(155,%2045,%2048,%200.8)'%20d='m256.00001,3c-90.84788,0%20-164.50002,66.44962%20-164.50002,148.4134c0,81.98356%20164.50002,358.58655%20164.50002,358.58655s164.50002,-276.60299%20164.50002,-358.58655c0,-81.96377%20-73.63021,-148.4134%20-164.50002,-148.4134zm0,219.33521c-43.40608,0%20-78.60908,-31.74068%20-78.60908,-70.92181s35.203,-70.92181%2078.60908,-70.92181s78.60908,31.76047%2078.60908,70.92181s-35.203,70.92181%20-78.60908,70.92181z'%20id='svg_1'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",uo=t=>new tt({fill:new As({color:"#dbdbdb"}),stroke:new we({color:"black",width:2}),text:new st({font:"18px Inter-Regular",justify:"center",color:"white",text:`${(t==null?void 0:t.get("name"))??""}`,stroke:new we({color:"black",width:.5})})}),ho=(t,c)=>{var s;const u=Es(t==null?void 0:t.get("position")),f=((s=Ae.find(l=>(t==null?void 0:t.get("status"))<=l.max&&(t==null?void 0:t.get("status"))>=l.min))==null?void 0:s.icon)??Ae[0].icon;return new tt({stroke:new we({color:"rgba(18, 55, 204, 0.26)",width:4}),text:new st({font:"18px Inter-Regular",justify:"center",color:"white",offsetX:u.x,offsetY:u.y,text:(t==null?void 0:t.get("always_show"))=="true"?`${(t==null?void 0:t.get("name"))??"-"}`:c<550?`${(t==null?void 0:t.get("name"))??"-"}`:"",stroke:new we({color:"black",width:.5})}),image:new Ut({src:f,anchor:[.5,1],scale:.08})})},go=(t,c)=>{var s;const u=((s=Ae.find(l=>(t==null?void 0:t.get("status"))<=l.max&&(t==null?void 0:t.get("status"))>=l.min))==null?void 0:s.icon)??Ae[0].icon,f=Es(t==null?void 0:t.get("position"));return new tt({stroke:new we({color:"rgba(18, 55, 204, 0.26)",width:4}),text:new st({font:"18px Inter-Regular",justify:"center",color:"white",offsetX:f.x,offsetY:f.y,text:(t==null?void 0:t.get("always_show"))=="true"?`${(t==null?void 0:t.get("name"))??"-"}`:c<550?`${(t==null?void 0:t.get("name"))??"-"}`:"",stroke:new we({color:"black",width:.5})}),image:new Ut({src:u,anchor:[.5,1],scale:.09})})},Es=t=>{switch(t){case"top":return{y:-30,x:0};case"top-right":return{y:-10,x:50};case"bottom":return{y:35,x:0};case"right":return{y:0,x:40};case"left":return{y:0,x:-35};default:return{x:0,y:0}}},Ae=[{max:100,min:91,name:"Dark green",color:"rgba(1, 50, 32, 0.8)",icon:eo},{max:90,min:81,name:"Green",color:"rgba(0, 128, 0, 0.8)",icon:to},{max:80,min:71,name:"Light green",color:"rgba(144, 238, 144, 0.8)",icon:so},{max:70,min:61,name:"Light yellow",color:"rgba(255, 255, 0, 0.8)",icon:ao},{max:60,min:51,name:"Yellow",color:"rgba(255, 187, 15, 0.8)",icon:no},{max:50,min:41,name:"Orange",color:"rgba(255, 165, 0, 0.8)",icon:lo},{max:40,min:31,name:"Light orange",color:"rgba(255, 104, 0, 0.8)",icon:oo},{max:30,min:21,name:"Light cherry",color:"rgba(222, 49, 99, 0.8)",icon:io},{max:20,min:11,name:"Crimson",color:"rgba(255, 36, 0, 0.8)",icon:ro},{max:10,min:1,name:"Maroon",color:"rgba(155, 45, 48, 0.8)",icon:co}],fo=({RefPopup:t,PopupParams:c})=>{var x;const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const y=window.matchMedia(M);return y.addEventListener("change",o=>_(f,o.matches)),()=>y.removeEventListener("change",_)},[]);const s=v(N);let l=[],r={};if(c!=null){r={annotations:[{font:{size:12},showarrow:!1,text:((x=c.assets)==null?void 0:x.length)??0,x:.5,y:.5}],height:100,width:100,showlegend:!1,margin:{t:0,r:0,b:0,l:0}};let y=null;c.assets!==null&&c.assets!==void 0&&(y=[{title:"Dangerous",count:c.assets.filter(o=>o.status==="Dangerous").length,color:oe.find(o=>o.title==="Dangerous").color},{title:"Warning",count:c.assets.filter(o=>o.status==="Warning").length,color:oe.find(o=>o.title==="Warning").color},{title:"Good",count:c.assets.filter(o=>o.status==="Good").length,color:oe.find(o=>o.title==="Good").color},{title:"Undefined",count:c.assets.filter(o=>o.status==="Undefined").length,color:oe.find(o=>o.title==="Undefined").color}],l=[{values:y.map(o=>{if(o.count>0)return o.count}),labels:y.map(o=>{if(o.count>0)return o.title}),domain:{column:0},hoverinfo:"none",hole:.4,type:"pie",textinfo:"value",marker:{colors:y.map(o=>{if(o.count>0)return o.color})}}])}if(s)return e.jsx(i,{ref:t,sx:{border:"1px solid black",borderRadius:"5px",background:"white",marginLeft:"10px"},children:e.jsxs(i,{sx:{margin:"5px",textAlign:"center"},children:[e.jsx(i,{sx:{...A,fontSize:u?"0.9em":"1em",...Z},children:c==null?void 0:c.name}),e.jsx(i,{children:l.length===0?e.jsx(i,{sx:{...A,fontSize:u?"0.9em":"1em",...Z},children:s.notDataLabel}):e.jsx(Q,{useResizeHandler:!0,data:l,layout:r,config:W.GetConfig()})}),e.jsx(at,{to:`substation/${c==null?void 0:c.subst_id}`,style:{...ts(u),...P,fontSize:u?"1em":"1.2em",color:"white",textDecoration:"none",borderRadius:"5px"},children:s.viewLabel})]})})},bo=({height:t,width:c,mapGeoJson:u,linesGeoJson:f,substGeoJson:s,settings:l})=>{const r=d.useRef(),x=v(N),[y,o]=d.useState(),m=d.useRef(),[j,a]=d.useState(),w=new Ne().readFeatures(u),S=new Fe({title:"subjects",visible:!0,source:new Ze({features:w}),background:"transparent",style:uo}),p=new Ne().readFeatures(f),T=new Fe({title:"powerLinesSubjects",visible:!0,source:new Ze({features:p}),background:"transparent"}),n=new Ne().readFeatures(s),b=new Fe({title:"substation",visible:!0,source:new Ze({features:n}),background:"transparent",style:(h,g)=>ho(h,g)});return d.useEffect(()=>{try{const h=new $s({element:r.current,autoPan:{animation:{duration:250}}}),g=new Os({target:m.current,layers:[S,T,b],controls:[],overlays:[h],view:new Gs({rotation:l.rotation,center:[l.center[0],l.center[1]],zoom:l.zoom,minZoom:l.min_zoom,maxZoom:l.max_zoom}),interactions:Bs().extend([new Ns({layers:[b],condition:function(I){return I.type==="pointermove"},style:(I,z)=>go(I,z)})])});g.on("singleclick",function(I){const z=g.getEventPixel(I.originalEvent),k=g.forEachFeatureAtPixel(z,function(F,L){return{feature:F,layer:L}});if(k!==void 0){if(k.layer.values_.title==="subjects")g.getView().fit(k.feature.getGeometry(),{duration:1e3}),h.setPosition(void 0);else if(k.layer.values_.title==="substation"){const F=k.feature.getGeometry().getCoordinates();g.getView().animate({center:F,duration:500,zoom:l.max_zoom}),h.get("position")?h.setPosition(void 0):setTimeout(()=>{const R=k.feature.getGeometry().getCoordinates();h.setPosition(R),o({assets:k.feature.values_.assets,subst_id:k.feature.values_.subst_id,name:k.feature.values_.name,countAsset:`${x.totalLabel} ${k.feature.values_.hasOwnProperty("assets")?k.feature.values_.assets.length:0}`})},500)}}else h.setPosition(void 0)}),a(g)}catch(h){console.log(h)}},[]),d.useEffect(()=>{j&&j.updateSize()},[t,c]),e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:m,className:"map-container",style:{height:`${t}px`}}),e.jsx(fo,{RefPopup:r,PopupParams:y})]})};function Be(t){const[c,u]=d.useState(window.innerWidth),[f,s]=d.useState(window.innerHeight);d.useEffect(()=>(t!==null&&t.current!==null&&t.current.offsetWidth!==null&&(u(t.current.offsetWidth),s(t.current.offsetHeight),window.addEventListener("resize",l)),()=>window.removeEventListener("resize",l)),[t.current]);const l=()=>{u(t.current.offsetWidth),s(t.current.offsetHeight)};return{width:c,height:f}}const xo=()=>{const c=G(),u=v(ss),f=v(ne),s=v(N),[l,r]=d.useState(null),[x,y]=d.useState(null),[o,m]=d.useState(null),[j,a]=d.useState(null),[w,S]=d.useState(null),p=async()=>Fs("myDatabase",1,{upgrade(F){F.objectStoreNames.contains("items")||F.createObjectStore("items",{keyPath:"id"})}}),T=async F=>{await(await p()).put("items",F)},n=async F=>{await(await p()).delete("items",F)},b=async()=>await(await p()).getAll("items"),h=F=>{const L={id:"map",data:{areas:F.data.find(R=>R.name=="Areas"),lines:F.data.find(R=>R.name=="Lines"),substations:F.data.find(R=>R.name=="Substations"),settings:F.settings,hash:F.hash}};T(L)},g=()=>{c(ns()).unwrap().then(F=>{b().then(L=>{let R=null;L.length!==0&&(R=L.find(C=>C.id==="map").data),c(ya(L.length>0?{hash:R.hash}:"")).unwrap().then(C=>{var E,B,U,$,K,gt;if(C.status[0]==="Error"){S(C.status);return}if(L.length===0){h(C),a(C.settings),r((E=C.data)==null?void 0:E.find(V=>V.name=="Areas")),y((B=C.data)==null?void 0:B.find(V=>V.name=="Lines"));let le=(U=C.data)==null?void 0:U.find(V=>V.name=="Substations");F.substations.forEach(V=>{let q=le.features.find(je=>je.properties.subst_id==V.id);q&&(q.properties={...q==null?void 0:q.properties,...V})}),m(le)}else if(C.hash===R.hash){console.log("Hash Equal"),a(R.settings),r(R.areas),y(R.lines);let le=R.substations;F.substations.forEach(V=>{let q=le.features.find(je=>je.properties.subst_id==V.id);q&&(q.properties={...q==null?void 0:q.properties,...V})}),m(le)}else if(console.log("Hash Not equal"),n("map").catch(console.error),C.data.length>0){h(C),a(C.settings),r(($=C.data)==null?void 0:$.find(V=>V.name=="Areas")),y((K=C.data)==null?void 0:K.find(V=>V.name=="Lines"));let le=(gt=C.data)==null?void 0:gt.find(V=>V.name=="Substations");F.substations.forEach(V=>{let q=le.features.find(je=>je.properties.subst_id==V.id);q&&(q.properties={...q==null?void 0:q.properties,...V})}),m(le)}})})})};d.useEffect(()=>{g()},[f,c]);const I=v(lt);ot(()=>{g()},I);const z=d.useRef(null),k=Be(z);return u===D.loading?e.jsx(i,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ke,{color:"#003274"}),e.jsx(i,{sx:A,children:s.loadLabel})]})}):u===D.error?e.jsx(i,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(i,{sx:{display:"flex",alignItems:"center"},children:e.jsx(i,{sx:A,children:"Ошибка загрузки данных"})})}):e.jsxs(i,{sx:{display:"flex",height:"100%"},children:[e.jsx(i,{sx:{width:"15%",height:"100%"},children:e.jsx(as,{})}),e.jsxs(i,{ref:z,sx:{width:"60%",height:"100%"},children:[w!==null?e.jsx(i,{sx:{width:"100%",height:"68vh",display:"flex",justifyContent:"center",alignItems:"center"},children:w[1].map(F=>e.jsx(i,{children:F}))}):l!==null?e.jsx(bo,{height:k.height/100*75,width:k.width,mapGeoJson:l,linesGeoJson:x,substGeoJson:o,settings:j}):e.jsx(i,{sx:{width:"100%",height:"68vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(ke,{color:"#003274"})}),e.jsx(i,{sx:{height:`${k.height/100*24}px`},children:e.jsx(Xl,{})})]}),e.jsx(i,{sx:{width:"25%",height:"100%"},children:e.jsx(Jl,{height:k.height})})]})},mo=({isOpenPData:t,setIsOpenPData:c,assetName:u,substName:f,elementId:s})=>{const l=G(),r=v(N),x=v(va),[y,o]=d.useState([]);return d.useEffect(()=>{try{if(x!==null){const m=x.categories.map(j=>e.jsxs(i,{sx:{marginBottom:"10px",marginTop:"10px"},children:[e.jsx(i,{sx:{color:Z.color,...A},children:j.title}),e.jsxs(ie,{striped:!0,withColumnBorders:!0,withBorder:!0,children:[e.jsx("thead",{}),e.jsx("tbody",{children:j.values.map(a=>e.jsxs("tr",{style:{color:Z.color,...P},children:[e.jsxs("td",{style:{width:"35%"},children:[a.signal," ",a.unit!==null?`, ${a.unit}`:""]}),e.jsx("td",{style:{width:"65%"},children:a.value})]},O()))})]})]},O()));o(m)}}catch(m){console.error("PDataTable"),console.log(m)}},[]),e.jsx(nt,{opened:t,onClose:()=>c(!1),styles:{header:{...A,...Z}},title:e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[`${r.pDataLabel}: ${u} ${f}`,e.jsx(i,{sx:{marginLeft:"15px",border:"1px solid #003274",borderRadius:"5px",background:"#003274","&:hover":{transform:"scale(1.1)"},"&:active":{transform:"scale(0.9)"}},onClick:m=>l(ls({placeTheCall:"passpowrtData",id:s})),children:e.jsx(X,{label:r.saveReportLabel,color:"#003274",position:"top",withArrow:!0,children:e.jsx(Qt,{stroke:2,color:"white"})})})]}),centered:!0,size:"50%",overlayProps:{color:"black",opacity:.7,blur:5},children:e.jsx(i,{children:e.jsx(i,{children:y})})})},po=({isOpenSettings:t,setIsOpenSettings:c,assetName:u,substName:f,elementId:s})=>{const l=G(),r=v(N),x=v(wa),[y,o]=d.useState([]);return d.useEffect(()=>{try{if(x!==null){const m=x.categories.map(j=>e.jsxs(i,{sx:{marginBottom:"10px",marginTop:"10px"},children:[e.jsx(i,{sx:{color:Z.color,...A},children:j.title}),e.jsxs(ie,{striped:!0,withColumnBorders:!0,withBorder:!0,children:[e.jsx("thead",{}),e.jsx("tbody",{children:j.values.map(a=>e.jsxs("tr",{style:{color:Z.color,...P},children:[e.jsxs("td",{style:{width:"35%"},children:[a.signal," ",a.unit!==null?`, ${a.unit}`:""]}),e.jsx("td",{style:{width:"65%"},children:a.value})]},O()))})]})]},O()));o(m)}}catch(m){console.error("ModelSettings"),console.log(m)}},[]),e.jsx(nt,{opened:t,onClose:()=>c(!1),styles:{header:{...A,...Z}},title:e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[`${r.constLimsLabel}: ${u} ${f}`,e.jsx(i,{sx:{marginLeft:"15px",border:"1px solid #003274",borderRadius:"5px",background:"#003274","&:hover":{transform:"scale(1.1)"},"&:active":{transform:"scale(0.9)"}},onClick:m=>l(ls({placeTheCall:"modelsSettings",id:s})),children:e.jsx(X,{label:r.saveReportLabel,color:"#003274",position:"top",withArrow:!0,children:e.jsx(Qt,{stroke:2,color:"white"})})})]}),centered:!0,size:"50%",overlayProps:{color:"black",opacity:.7,blur:5},children:e.jsx(i,{children:e.jsx(i,{children:y})})})},yo=()=>{const[t,c]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const p=window.matchMedia(M);return p.addEventListener("change",T=>_(c,T.matches)),()=>p.removeEventListener("change",_)},[]);const u=G(),f=v(ja),s=v(He),l=v(N),r=v(Ta),x=v(Ie),[y,o]=d.useState(!f.gasesUnit.includes("(ppm)")),[m,j]=d.useState(!1),[a,w]=d.useState(!1),S=p=>{u(Sa(p)),o(p)};return e.jsxs(i,{sx:{width:"100%",display:"flex",alignItems:"center",border:"1px solid rgba(191, 191, 191, 0.8)",borderRadius:"5px",overflow:"hidden"},children:[e.jsxs(i,{sx:{display:"flex",width:"80%",alignItems:"center"},children:[e.jsxs(i,{sx:vo(t),children:[e.jsxs(i,{children:[l.substNavLabel,": ",(x==null?void 0:x.name)??""]}),e.jsxs(i,{children:[l.assetLabel,": ",(s==null?void 0:s.asset)??""]})]}),e.jsx(X,{label:l.pDataLabel,color:"#003274",position:"bottom",withArrow:!0,style:P,children:e.jsx(i,{sx:{margin:"0 1%","&:hover":{transform:"scale(1.1)",cursor:"pointer"},"&:active":{transform:"scale(0.9)"}},onClick:()=>j(!0),children:e.jsx(Zs,{stroke:2,color:"#003274"})})}),e.jsx(X,{label:l.constLimsLabel,color:"#003274",position:"bottom",withArrow:!0,style:P,children:e.jsx(i,{sx:{margin:"0 1%","&:hover":{transform:"scale(1.1)",cursor:"pointer"},"&:active":{transform:"scale(0.9)"}},onClick:()=>w(!0),children:e.jsx(Us,{stroke:2,color:"#003274"})})}),e.jsx(X,{label:l.chartsLabel,color:"#003274",position:"bottom",withArrow:!0,style:P,children:e.jsx(at,{to:"charts",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"30px",height:"30px",margin:"0 1%"},children:e.jsx(i,{sx:{"&:hover":{transform:"scale(1.1)",cursor:"pointer"},"&:active":{transform:"scale(0.9)"}},children:e.jsx(Qs,{stroke:2,color:"#003274"})})})}),e.jsxs(i,{sx:{...Z,...A},children:[l.health,": ",r??""]})]}),e.jsx(i,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"20%",paddingRight:"1%"},children:e.jsx(Wt,{styles:{trackLabel:{fontSize:"1.5em",cursor:"pointer"},track:{cursor:"pointer"}},size:"md",onLabel:"%",offLabel:"%",checked:y,onChange:p=>S(p.currentTarget.checked)})}),e.jsx(mo,{isOpenPData:m,setIsOpenPData:j,assetName:s==null?void 0:s.asset,substName:x==null?void 0:x.name,elementId:s==null?void 0:s.elementId}),e.jsx(po,{isOpenSettings:a,setIsOpenSettings:w,assetName:s==null?void 0:s.asset,substName:x==null?void 0:x.name,elementId:s==null?void 0:s.elementId})]})},vo=t=>({...A,color:"#003274",fontSize:t?"1em":"1.2em",margin:"1%"}),ut=[{name:"ppm",calc:t=>(t*1e4).toFixed(4)},{name:"percent",calc:t=>t==null?t:(t/1e4).toFixed(4)},{name:"nf",calc:t=>t==null?t:(t/1e4).toFixed(4)}],pe=({text:t})=>e.jsx(i,{sx:{margin:"5px",...A,...Z,borderBottom:os.borderColor,cursor:"pointer",userSelect:"none",background:"aliceblue"},children:t}),ks=d.forwardRef(({style:t,className:c,onMouseDown:u,onMouseUp:f,onTouchEnd:s,children:l,...r},x)=>{const y=v(it);return e.jsxs(i,{style:{...t},className:c,ref:x,onMouseDown:u,onMouseUp:f,onTouchEnd:s,children:[e.jsx(pe,{text:r.data.name}),e.jsx(ie,{children:e.jsx("tbody",{children:r.data.values.map(o=>{let m=null,j=null,a=null,w=null,S=null;return o.measure_unit.length>1&&y?(m=o.measure_unit[1].name,j=ut.find(p=>p.name===o.measure_unit[1].code),a=j.calc(o.dz),w=j.calc(o.pdz),S=j.calc(o.value)):(m=o.measure_unit[0].name,a=o.dz,w=o.pdz,S=o.value),e.jsxs("tr",{children:[e.jsx("td",{style:{width:`${r.data.widthFirstColumn}%`,...A,...Z,border:"0px solid transparent"},children:o.name+` (${m})`},O()),e.jsx("td",{style:{margin:"0",display:"flex",alignItems:"center",border:"0px solid transparent"},children:e.jsx(La,{dz:a,pdz:w,borderRadius:10,value:S},O())},O())]},O())})})}),l]})}),Rs=d.forwardRef(({style:t,className:c,onMouseDown:u,onMouseUp:f,onTouchEnd:s,children:l,...r},x)=>{var j;const y=[{code:"t_en",icons:e.jsx(Ue,{stroke:2})},{code:"t_tp",icons:e.jsxs(i,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(i,{sx:{marginBottom:"-15px"},children:e.jsx(ft,{stroke:2})}),e.jsx(Ue,{stroke:2})]})},{code:"t_bt",icons:e.jsxs(i,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(i,{sx:{marginTop:"15px",marginBottom:"-15px"},children:e.jsx(Ue,{stroke:2})}),e.jsx(ft,{stroke:2})]})}],[o,m]=d.useState(0);return d.useEffect(()=>{const w=Math.floor(x.current.clientWidth/100);r.data.values.length-w,m(w)},[r["data-grid"],(j=x==null?void 0:x.current)==null?void 0:j.clientWidth]),e.jsxs(i,{style:{...t},className:c,ref:x,onMouseDown:u,onMouseUp:f,onTouchEnd:s,children:[e.jsx(pe,{text:r.data.name}),e.jsx(Ws,{cols:o,spacing:"xs",verticalSpacing:"xs",children:r.data.values.map(a=>{var w;return e.jsx(X,{label:a.name,withArrow:!0,styles:{tooltip:{background:"RGB(0, 50, 116)",color:"white"}},children:e.jsxs(i,{sx:{display:"flex",justifyContent:a.icon===null||a.icon===void 0||a.icon.length===0?"center":"space-between",alignItems:"center"},children:[(w=y.find(S=>S.code===a.icon))==null?void 0:w.icons,e.jsxs(i,{sx:{...Z,...P,fontWeight:"bold"},children:[a.value," "," "+a.measure_unit[0].name]},O())]},O())},O())})}),l]})}),Hs=d.forwardRef(({style:t,className:c,onMouseDown:u,onMouseUp:f,onTouchEnd:s,children:l,...r},x)=>{const y=v(it);return e.jsxs(i,{style:{...t},className:c,ref:x,onMouseDown:u,onMouseUp:f,onTouchEnd:s,children:[e.jsx(pe,{text:r.data.name}),e.jsxs(ie,{striped:!0,withColumnBorders:!0,children:[e.jsx("thead",{children:e.jsx("tr",{children:r.data.values[0].map((o,m)=>e.jsx("td",{style:{width:`${m==0?r.data.widthFirstColumn:""}%`,...A,...Z,textAlign:"center"},children:o.content},O()))},O())}),e.jsx("tbody",{children:r.data.values.map((o,m)=>{if(m!=0)return e.jsx("tr",{children:o.map((j,a)=>{let w=null,S=null,p=null;return o[0].measure_unit.length>1&&y?(w=o[0].measure_unit[1].name,S=ut.find(T=>T.name==o[0].measure_unit[1].code),p=S.calc(j.content)):(w=o[0].measure_unit[0].name,p=j.content),e.jsx("td",{style:{width:`${a==0?r.data.widthFirstColumn:""}%`,...A,textAlign:a==0?"":"center",color:j.status!==0?"white":Z.color,background:j.status!==0?is.find(T=>T.levelState===j.status).color:"transparent"},children:a==0?`${j.content} (${w})`:p},O())})},O())})})]}),l]})}),ht=d.forwardRef(({style:t,className:c,onMouseDown:u,onMouseUp:f,onTouchEnd:s,children:l,...r},x)=>{var n,b,h,g;const y=v(N),o=v(it);let m=!1;const j=d.useMemo(()=>{let I=[];switch(r.chartType){case"chartPanel":const z=[],k=[];r.data.values.forEach(E=>{z.push(E[0]),k.push(E[1])}),I.push({x:z,y:k,mode:"lines",fill:"tozeroy",line:{color:"green"},type:"scatter"});break;case"boxChart":I=r.data.values.map(E=>{const B=E.timestamp.split(".");let U=null;if(r.data.measure_unit.length>1&&o){let $=ut.find(K=>K.name===r.data.measure_unit[1].code);U=E.values.map(K=>$.calc(K))}else U=E.values;return m=!!(U!=null&&U.find($=>$<1e-4)),{y:U,marker:{color:"rgb(0,128,0)"},type:"box",name:`${B[2]}.${B[1]}`,hoverinfo:"none"}});break;case"triangleChart":const F={name:"",showlegend:!1,hoverinfo:"text",type:"scatterternary",mode:"markers",line:{color:"black"},a:r.data.values.CH4,b:r.data.values.C2H2,c:r.data.values.C2H4,marker:{color:r.data.values.dates.map((E,B)=>B),size:14,line:{width:1,color:"black"}},text:r.data.values.dates.map(E=>E.replace("T"," ")),hovertemplate:"<i>C2H4: %{c} </i><br><i>CH4: %{a} </i><br><i>C2H2: %{b} </i><br><i>%{text}</i>"};let L=[{name:y.lowEnergySparkDischargeLabel,showlegend:!1,hoverinfo:"text",type:"scatterternary",mode:"lines",line:{color:"black"},b:[.01,13,13,77],c:[0,0,23,23],a:[0,87,64,0],marker:{symbol:100,color:"#DB7365",size:14,line:{width:2}},fill:"toself",fillcolor:"#005686"},{name:y.highEnergySparkDischargeLabel,showlegend:!1,hoverinfo:"text",type:"scatterternary",mode:"lines",line:{color:"black"},b:[77,13,13,29,29],c:[23,23,40,40,71],a:[0,64,47,31,0],marker:{symbol:100,color:"#DB7365",size:14,line:{width:2}},fill:"toself",fillcolor:"#7fc7e2"},{name:y.compositionOfElectricalAndThermalDefectsLabel,hoverinfo:"text",showlegend:!1,type:"scatterternary",mode:"lines",line:{color:"black"},b:[29,29,13,13,4,4,15,15],c:[71,40,40,0,0,50,50,85],a:[0,31,47,87,96,46,35,0],marker:{symbol:100,color:"#DB7365",size:14,line:{width:2}},fill:"toself",fillcolor:"#dccfe2"},{name:y.thermalDefectInHighTemperatureRangeLabel,showlegend:!1,hoverinfo:"text",type:"scatterternary",mode:"lines",line:{color:"black"},b:[15,15,0,0],c:[85,50,50,100],a:[0,35,50,0],marker:{symbol:100,color:"#DB7365",size:14,line:{width:2}},fill:"toself",fillcolor:"#c89c82"},{name:y.thermalDefectInMiddleTemperatureRangeLabel,showlegend:!1,hoverinfo:"text",type:"scatterternary",mode:"lines",line:{color:"black"},b:[4,0,0,4],c:[50,50,20,20],a:[46,50,80,76],marker:{symbol:100,color:"#DB7365",size:14,line:{width:2}},fill:"toself",fillcolor:"#f0cac1"},{name:y.thermalDefectInLowTemperatureRangeLabel,showlegend:!1,hoverinfo:"text",type:"scatterternary",mode:"lines",line:{color:"black"},b:[4,0,0,2,4],c:[20,20,2,0,0],a:[76,80,98,98,96],marker:{symbol:100,color:"#DB7365",size:14,line:{width:2}},fill:"toself",fillcolor:"#f4ecea"},{name:y.pdLabel,showlegend:!1,hoverinfo:"text",type:"scatterternary",mode:"lines",line:{color:"black"},b:[2,0,0],c:[0,2,0],a:[98,98,100],marker:{symbol:100,color:"#DB7365",size:14,line:{width:2}},fill:"toself",fillcolor:"#9b8fa4"}];L.push(F),I.push(...L);break;case"pentagonChart":const R={x:r.data.values.x,y:r.data.values.y,showlegend:!1,mode:"markers",marker:{color:r.data.values.dates.map((E,B)=>B),size:14,line:{width:1,color:"black"}},text:r.data.values.dates.map((E,B)=>`H2: ${r.data.values.h2[B]}<br>CH4: ${r.data.values.ch4[B]}<br>C2H6: ${r.data.values.c2h6[B]}<br>C2H4: ${r.data.values.c2h4[B]}<br>C2H2: ${r.data.values.c2h2[B]} <br>${E.replace("T"," ")}`),hoverinfo:"text"};let C=[{x:[-35,0,0,-1,-1,0,0,-38,-35],y:[3,1.5,24.5,24.5,33,33,40,12.4,3],fill:"toself",fillcolor:"#90af9d",hoveron:"points+fills",mode:"lines",line:{color:"black",width:2},text:y.mineralOilGassingLabel,hoverinfo:"text"},{x:[-22.5,-6,-1,0,-35,-23.5,-22.5],y:[-32.4,-4,-2,1.5,3,-32.4,-32.4],fill:"toself",fillcolor:"#f4ecea",hoveron:"points+fills",mode:"lines",line:{color:"black",width:2},text:y.thermalDefectInLowTemperatureRangeLabel,hoverinfo:"text"},{x:[0,38,32,4,0,0],y:[40,12,-6,16,1.5,40],fill:"toself",fillcolor:"#005686",hoveron:"points+fills",mode:"lines",line:{color:"black",width:2},text:y.lowEnergySparkDischargeLabel,hoverinfo:"text"},{x:[0,0,-1,-1,0],y:[24.5,33,33,24.5,24.5],fill:"toself",fillcolor:"#9b8fa4",hoveron:"points+fills",mode:"lines",line:{color:"black",width:1},text:y.pdLabel,hoverinfo:"text"},{x:[1,-6,-22.5,1],y:[-32.4,-4,-32.4,-32.4],fill:"toself",fillcolor:"#f0cac1",hoveron:"points+fills",mode:"lines",line:{color:"black",width:2},text:y.thermalDefectInMiddleTemperatureRangeLabel,hoverinfo:"text"},{x:[24,-1,-6,1,23.5,24],y:[-30,-2,-4,-32.4,-32.4,-30],fill:"toself",fillcolor:"#c89c82",hoveron:"points+fills",mode:"lines",line:{color:"black",width:2},text:y.thermalDefectInHighTemperatureRangeLabel,hoverinfo:"text"},{x:[4,32,24,-1,4],y:[16,-6,-30,-2,16],fill:"toself",fillcolor:"#7fc7e2",hoveron:"points+fills",mode:"lines",line:{color:"black",width:2},text:y.highEnergySparkDischargeLabel,hoverinfo:"text"},{x:["0","41"],y:["0","13"],showlegend:!1,mode:"lines",marker:{color:re},text:["","40% C2H2"],textposition:"top left",hoverinfo:"text"},{x:["0","48"],y:["0","16"],showlegend:!1,mode:"text",marker:{color:re},text:["","40% C2H2"],textposition:"top left",hoverinfo:"text"},{x:["0","0"],y:["0","41"],showlegend:!1,mode:"lines+text",marker:{color:re},text:["","40% H2"],textposition:"top",hoverinfo:"text"},{x:["0","-41"],y:["0","13.5"],showlegend:!1,mode:"lines",marker:{color:re},text:["","40% C2H6"],textposition:"top right",hoverinfo:"text"},{x:["0","-45"],y:["0","16"],showlegend:!1,mode:"text",marker:{color:re},text:["","40% C2H6"],textposition:"top right",hoverinfo:"text"},{x:["0","-25.5"],y:["0","-35"],showlegend:!1,mode:"lines+text",marker:{color:re},text:["","40% CH4"],textposition:"bottom",hoverinfo:"text"},{x:["0","25.5"],y:["0","-35"],showlegend:!1,mode:"lines+text",marker:{color:re},text:["","40% C2H4"],textposition:"bottom",hoverinfo:"text"}];C.push(R),I.push(...C);break}return I},[r.chartType,r.data,y,o]),a=d.useMemo(()=>{switch(r.chartType){case"chartPanel":return{grid:{rows:1,columns:1,pattern:"independent"},xaxis:{type:"date",tickformat:"%d-%m-%y %H:%M",tickfont:{size:0,color:"transparent",family:A.fontFamily}},yaxis:{tickfont:{size:12,color:Z.color,family:A.fontFamily}},autosize:!1,margin:{l:30,r:10,b:50,t:0,pad:4}};case"boxChart":return{showlegend:!1,margin:{l:60,r:10,b:80,t:0,pad:4},hoverlabel:{font:{family:P.fontFamily,size:12,color:"white"}},yaxis:{tickformat:m&&o?".4f":""}};case"triangleChart":return{...Da,margin:{b:100,t:5},annotations:[]};case"pentagonChart":return{...Ca,margin:{t:0,b:50,l:0,r:0},annotations:[],paper_bgcolor:"transparent",plot_bgcolor:"transparent"}}},[r.chartType,y,o]),[w,S]=d.useState(0),[p,T]=d.useState(0);return d.useEffect(()=>{setTimeout(()=>{x!==null&&x.current!==null&&x.current.clientWidth!==null&&(S(x.current.clientWidth),T(x.current.clientHeight))},500)},[(n=x==null?void 0:x.current)==null?void 0:n.clientWidth,(b=x==null?void 0:x.current)==null?void 0:b.clientHeight]),e.jsxs(i,{style:{...t},className:c,ref:x,onMouseDown:u,onMouseUp:f,onTouchEnd:s,children:[r.chartType==="boxChart"?e.jsx(pe,{text:`${r.data.name} ${(h=r.data)!=null&&h.measure_unit&&o?`(${r.data.measure_unit[1].name})`:`(${r.data.measure_unit[0].name})`}`}):e.jsx(pe,{text:`${r.data.name} ${(g=r.data)!=null&&g.measure_unit?`(${r.data.measure_unit[0].name})`:""}`}),e.jsx(Q,{useResizeHandler:!0,data:j,layout:{...structuredClone(a),width:w,height:p,dragmode:!1},config:{...W.GetConfig(),scrollZoom:!1}}),l]})});d.memo(ht);const wo=({group:t,width:c,height:u})=>{const f=v(N),[s,l]=d.useState(null);return d.useLayoutEffect(()=>{const r=t.sensors.map(x=>{var y;return e.jsx(X,{withArrow:!0,arrowSize:15,label:e.jsxs(i,{children:[e.jsx(i,{children:`${t.name}`}),e.jsx(i,{children:`${x.name}: ${x.value} ${x.measure_unit}`}),x.dz===null?null:e.jsx(i,{children:f.lim0Label+`: ${x.dz} ${x.measure_unit}`}),x.pdz===null?null:e.jsx(i,{children:f.lim1Label+`: ${x.pdz} ${x.measure_unit}`})]}),children:e.jsx(i,{sx:{width:"100%",height:"100%",border:"1px solid black",borderRadius:"50%",background:((y=is.find(o=>o.levelState===x.status))==null?void 0:y.color)??"rgba(39, 114, 245, 0.8)"}},O())},O())});l(r)},[]),e.jsx(i,{sx:{position:"absolute",left:`${t.x}%`,top:`${t.y}%`,display:"flex",width:`${s!==null?s.length:0}%`,height:"2%"},children:s},O())},Is=({imageUrl:t,cbGetSize:c})=>(d.useEffect(()=>{const u=new Image;u.onload=()=>{c({width:u.width,height:u.height})},u.src=t},[t]),e.jsx("img",{src:t,alt:"Loaded",style:{width:"100%",height:"100%",objectFit:"contain"}})),$e=d.forwardRef(({style:t,className:c,onMouseDown:u,onMouseUp:f,onTouchEnd:s,children:l,...r},x)=>{const[y,o]=d.useState(r.data.value),[m,j]=d.useState(null),[a,w]=d.useState(null),[S,p]=d.useState(null);d.useLayoutEffect(()=>{if(r.data.hasOwnProperty("groups")&&r.data.groups.length>0){const z=r.data.groups.map(k=>e.jsx(wo,{group:k,width:T},O()));p(z)}},[]);const[T,n]=d.useState(0),[b,h]=d.useState(0);d.useEffect(()=>{r.data.hasOwnProperty("groups")&&r.data.groups.length>0&&x!==null&&x.current!==null&&x.current.clientWidth!==null&&(n(x.current.clientWidth),h(x.current.clientHeight),setTimeout(()=>{w({width:x.current.offsetWidth,height:x.current.offsetHeight})},500))},[r.lastValues]);const g=()=>{let z,k,F=m.width/m.height,L=a.width/a.height;return F>L?(z=a.width,k=m.height*(a.width/m.width)):(k=a.height,z=m.width*(a.height/m.height)),{width:z,height:k}};let I=null;return m!==null&&a!==null&&(I=g()),e.jsxs(i,{style:{...t},className:c,ref:x,onMouseDown:u,onMouseUp:f,onTouchEnd:s,sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflowY:"auto",position:"relative"},children:[e.jsx(Is,{imageUrl:y,cbGetSize:j}),e.jsx(i,{sx:{position:"absolute",width:`${I!==null?I.width:0}px`,height:`${I!==null?I.height:0}px`},children:S}),l]})}),Ms=d.forwardRef(({style:t,className:c,onMouseDown:u,onMouseUp:f,onTouchEnd:s,children:l,...r},x)=>e.jsxs(i,{style:{...t},className:c,ref:x,onMouseDown:u,onMouseUp:f,onTouchEnd:s,children:[e.jsx(pe,{text:r.data.name}),r.data.values.map(y=>e.jsx(i,{sx:{...A,...Z},children:y},O())),l]})),jo=_e.WidthProvider(_e.Responsive),ue={overflow:"hidden"},To=d.forwardRef(({style:t,className:c,onMouseDown:u,onMouseUp:f,onTouchEnd:s,children:l,...r},x)=>{const y=G(),o=v(rs),m=a=>{const w=o.find(S=>+S.i===a.id);switch(a.typeDisplay){case"textField":return e.jsx(Ms,{data:a,"data-grid":w,style:ue},`${a.id}`);case"limitsBar":return e.jsx(ks,{data:a,"data-grid":w,style:ue},`${a.id}`);case"wrapPanel":return e.jsx(Rs,{data:a,"data-grid":w,style:ue},`${a.id}`);case"linearTable":return e.jsx(Hs,{data:a,"data-grid":w,style:ue},`${a.id}`);case"pentagonChart":case"triangleChart":case"boxChart":case"chartPanel":return e.jsx(ht,{data:a,"data-grid":w,style:ue,chartType:a.typeDisplay},`${a.id}`);case"img":return e.jsx($e,{className:"titlebar",data:a,"data-grid":w,style:ue},`${a.id}`);case"img&ind":return e.jsx($e,{className:"titlebar",data:a,"data-grid":w,style:ue},`${a.id}`)}},j=a=>{const w=a.map(S=>({i:S.i,x:S.x,y:S.y,w:S.w,h:S.h}));y(za(w))};return e.jsxs(i,{style:{...t},className:c,ref:x,onMouseDown:u,onMouseUp:f,onTouchEnd:s,children:[e.jsx(jo,{className:"layout",layouts:{lg:o},breakpoints:{lg:1200},cols:{lg:12},width:1200,rowHeight:30,onDragStop:a=>j(a),onResizeStop:a=>j(a),children:r.data.parts.map(a=>m(a))}),l]})}),So=_e.WidthProvider(_e.Responsive),he={border:os.borderColor,borderRadius:"5px",overflow:"hidden"},Lo=()=>{const t=G(),c=d.useRef(null),u=Be(c),f=v(rs),s=v(Ea),l=v(ka),[r,x]=d.useState(null),[y,o]=d.useState({lg:[]}),m=a=>{t(Ha(a))};d.useEffect(()=>{try{if(s!==null&&l!==null){const a=l.map(w=>w.hasOwnProperty("parts")?e.jsxs(i,{sx:{border:"1px solid rgba(191, 191, 191, 0.8)",borderRadius:"5px",overflow:"hidden"},children:[e.jsx(i,{className:"titlebar",children:e.jsx(pe,{text:w.name})}),e.jsx(i,{className:"content",children:e.jsx(To,{data:w})})]},w.id):j(w));x(a),o({lg:s})}}catch(a){console.log(a)}},[s,l,f]),d.useEffect(()=>()=>{try{s!==null&&t(Ra())}catch(a){console.error("SAVETRANSFORM DATA ERROR"),console.error(a)}},[]);const j=a=>{const w=s.find(S=>+S.i===a.id);switch(a.typeDisplay){case"textFields":return e.jsx(Ms,{data:a,"data-grid":w,style:he},`${a.id}`);case"limitsBar":return e.jsx(ks,{data:a,"data-grid":w,style:he},`${a.id}`);case"wrapPanel":return e.jsx(Rs,{data:a,"data-grid":w,style:he},`${a.id}`);case"linearTable":return e.jsx(Hs,{data:a,"data-grid":w,style:he},`${a.id}`);case"pentagonChart":case"triangleChart":case"boxChart":case"chartPanel":return e.jsx(ht,{data:a,"data-grid":w,style:he},`${a.id}`);case"img":return e.jsx($e,{className:"titlebar",data:a,"data-grid":w,style:he},`${a.id}`);case"img&ind":return e.jsx($e,{className:"titlebar",data:a,"data-grid":w,style:he},`${a.id}`)}};return s===null?e.jsx(i,{ref:c,sx:{height:"100%"},children:"Empty"}):e.jsx(i,{ref:c,sx:{height:"100%",paddingBottom:"1%"},children:e.jsx(So,{className:"layout",layouts:y,breakpoints:{lg:1200},cols:{lg:12},width:u.width,draggableCancel:".content",draggableHandle:".titlebar",rowHeight:30,onDragStop:a=>m(a),onResizeStop:a=>m(a),isDraggable:!0,isResizable:!0,children:r})})},Nt=d.memo(()=>{const t=Re(),c=G(),u=v(N),f=v(Ia),s=v(lt),[l,r]=d.useState(!1);return d.useLayoutEffect(()=>{(f===D.idle||f===D.error)&&c(qe({id:t.assetid,isTimer:!1}))},[f]),ot(()=>{c(qe({id:t.assetid,isTimer:!0}))},s),f===D.error?e.jsx(i,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(i,{sx:{display:"flex",alignItems:"center"},children:e.jsx(i,{sx:A,children:"Ошибка загрузки данных"})})}):e.jsxs(i,{children:[f===D.loading?e.jsxs(i,{sx:{display:"flex",alignItems:"flex-end",justifyContent:"center",width:"100%",height:"50vh"},children:[e.jsx(ke,{color:"#003274"}),e.jsx(i,{sx:A,children:u.loadLabel})]}):e.jsxs(i,{sx:{height:"calc(90% - 2px)"},children:[e.jsx(i,{sx:{paddingTop:"5px",marginLeft:"10px",marginRight:"10px"},children:e.jsx(yo,{})}),e.jsx(Lo,{})]}),e.jsxs(i,{sx:{background:"white",width:"100%",height:"70%",position:"fixed",left:0,bottom:l?"2.5%":"-67.5%",transition:"bottom 0.3s ease-in-out","&:hover":{cursor:"pointer"}},children:[e.jsxs(i,{sx:{background:Z.color,color:"white",display:"flex",alignItems:"center",justifyContent:"center",height:"4%"},onClick:()=>{r(!l)},children:[e.jsx(i,{sx:{transform:l?"":"rotate(180deg)"},children:e.jsx(bt,{stroke:2})}),e.jsx(i,{sx:{margin:"0 15px"},children:u.diagMsgLabel}),e.jsx(i,{sx:{transform:l?"":"rotate(180deg)"},children:e.jsx(bt,{stroke:2})})]}),e.jsx(Ma,{})]})]})}),Co=[{name:"humidity",values:["charts","hysteresis"]},{name:"gases",values:["charts","rdTable","stoTable","rdnomogram","triangle","pentagon"]}];function J(t=null){const c=Re(),u=G(),f=v(He),s=v(Ge),l=v(cs),r=v(ne),x=v(_a),y=v(rt),o=v(ct),m=v(N),[j,a]=d.useState(null);return d.useEffect(()=>{var w;try{((w=Co.find(n=>n.name===s))==null?void 0:w.values.includes(l))||u(me("charts"));const p=f===null?c.assetId:f.elementId,T=y==null&&o==null?`${Pe}/asset/${p}/meterings/${s}/${l}?lng=${r.value}`:`${Pe}/asset/${p}/meterings/${s}/${l}?lng=${r.value}&dateStart=${y}&dateEnd=${o}&signals=${x}`;a(T)}catch(S){console.log(S)}},[s,l,f,r,x,y,o]),{url:j,translations:m,codeTab:s,codeSubTab:l,addonData:t}}const Le="black",Do=()=>{const[t,c]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const p=window.matchMedia(M);return p.addEventListener("change",T=>_(c,T.matches)),()=>p.removeEventListener("change",_)},[]);const u=G(),f=J(),s=v(N),l=v(He),r=v(rt),x=v(ct),y=v(Ge),o=v(cs),m=v(Ie),j=[{tab:"gases",subTab:"charts",cb:Pa},{tab:"gases",subTab:"triangle",cb:Aa},{tab:"gases",subTab:"pentagon",cb:$a},{tab:"humidity",subTab:"hysteresis",cb:Oa},{tab:"humidity",subTab:"charts",cb:Ga},{tab:"overvoltage",subTab:"charts",cb:Ba},{tab:"power",subTab:"charts",cb:Na},{tab:"loadcapacity",subTab:"charts",cb:Fa},{tab:"temperature",subTab:"charts",cb:Za},{tab:"bushing",subTab:"charts",cb:Ua},{tab:"wear",subTab:"charts",cb:Qa},{tab:"its",subTab:"charts",cb:Wa},{tab:"pd",subTab:"charts",cb:Va},{tab:"sf6",subTab:"charts",cb:Ya},{tab:"ltc",subTab:"charts",cb:Ja}];s.lowEnergySparkDischargeLabel,s.highEnergySparkDischargeLabel,s.compositionOfElectricalAndThermalDefectsLabel,s.thermalDefectInHighTemperatureRangeLabel,s.thermalDefectInMiddleTemperatureRangeLabel,s.thermalDefectInLowTemperatureRangeLabel,s.pdLabel,s.mineralOilGassingLabel,s.thermalDefectInLowTemperatureRangeLabel,s.lowEnergySparkDischargeLabel,s.pdLabel,s.thermalDefectInMiddleTemperatureRangeLabel,s.thermalDefectInHighTemperatureRangeLabel,s.highEnergySparkDischargeLabel;const a=p=>{u(Ke(p))},w=p=>{new Date(r)>new Date(p)&&u(Ke(p)),u(es(p))},S=()=>{u(Xt(null)),y==="gases"&&o==="charts"?u(ds(f)):y=="humidity"&&o==="charts"?u(us(f)):y=="humidity"&&o==="hysteresis"?u(hs(f)):y=="overvoltage"?u(gs(f)):y=="power"?u(fs(f)):y=="loadcapacity"?u(bs(f)):y=="temperature"?u(xs(f)):y==="gases"&&o=="triangle"?u(ms(f)):y==="gases"&&o=="pentagon"?u(ps(f)):y=="bushing"?u(ys(f)):y=="wear"?u(vs(f)):y=="its"?u(ws(f)):y=="pd"?u(js(f)):y=="sf6"?u(Ts(f)):y=="ltc"&&u(Ss(f)),j.filter(p=>p.tab!=y).forEach(p=>u(p.cb(D.idle))),j.filter(p=>p.subTab!==o).forEach(p=>u(p.cb(D.idle)))};return e.jsxs(i,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",width:"50%"},children:[e.jsx(mt,{label:s.fromLabel,dateValue:r,getValue:a,limitDate:x}),e.jsx(mt,{label:s.toLabel,dateValue:x,getValue:w,limitDate:Date.now()}),e.jsx(Vt,{styles:{root:{...ts(t)},label:{...P}},onClick:()=>S(),children:s.applyLabel})]}),e.jsxs(i,{sx:{...zo(t),display:"flex",flexDirection:"column"},children:[e.jsxs(i,{children:[s.substNavLabel,": ",(m==null?void 0:m.name)??""]}),e.jsxs(i,{children:[s.assetLabel,": ",(l==null?void 0:l.asset)??""]})]})]})},zo=t=>({...A,color:"#003274",fontSize:t?"1em":"1.2em"}),ee=({limitVisibleHandler:t,isDisplayDz:c,isDisplayPdz:u})=>{const[f,s]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const r=window.matchMedia(M);return r.addEventListener("change",x=>_(s,x.matches)),()=>r.removeEventListener("change",_)},[]);const l=v(N);return e.jsxs(i,{sx:{width:"15%",display:"flex",justifyContent:"space-around"},children:[e.jsx(xt,{label:l.lim0Label,checked:c,styles:{label:{...P,fontSize:f?"0.8em":"1em"}},onChange:r=>{t("dz",r.currentTarget.checked)}}),e.jsx(xt,{label:l.lim1Label,checked:u,styles:{label:{...P,fontSize:f?"0.8em":"1em"}},onChange:r=>{t("pdz",r.currentTarget.checked)}})]})},Eo=({SwitcherHandler:t,isVol:c})=>{const u=v(N);return e.jsx(Wt,{label:u.volLabel,checked:c,onChange:f=>t(f.currentTarget.checked)})},te=t=>{let u=0;for(const f in t)f.includes("yaxis")&&t[f].visible&&(t[f].position=.04*u,u++);t.xaxis.domain=[.04*u,1]},se=(t,c)=>{const u=t.curveNumber,f=t.data.filter(x=>x.yaxis===t.data[u].yaxis&&!x.hasOwnProperty("customType")&&x.mode!=="none"),s=f.filter(x=>x.visible===!0).length,l=f[0].yaxis.replace("y","yaxis");Object.keys(c).forEach(x=>{x==l&&(c[x].visible=s!==0)})},Ft=(t,c)=>{let u=structuredClone(c);return Object.keys(u).forEach(f=>{f.includes("yaxis")&&(u[f].visible=t[f].visible,u[f].position=t[f].position)}),u.xaxis.domain=t.xaxis.domain,u},ko=({width:t,height:c})=>{const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const L=window.matchMedia(M);return L.addEventListener("change",R=>_(f,R.matches)),()=>L.removeEventListener("change",_)},[]);const s=G(),l=v(Ka),r=v(qa);v(N);const x=v(Xa),y=v(en),o=v(tn),m=v(sn),[j,a]=d.useState(),[w,S]=d.useState();d.useState(!1),d.useState(!1);let p=null,T=!1;const n=(L,R)=>{let C=[];if(L==="dz"&&(a(R),C=p.data.filter(E=>E.mode!=="none"&&E.visible===!0).map(E=>`${E.name}_dz`)),L==="pdz"&&(S(R),C=p.data.filter(E=>E.mode!=="none"&&E.visible===!0).map(E=>`${E.name}_pdz`)),p.data.forEach(E=>{C.includes(E.customType)&&(E.visible=R)}),r=="ppm"){let E=structuredClone(m);p.data.forEach(B=>{let U=E.find($=>"customType"in $&&$.customType==B.customType);U&&(U.visible=B.visible)}),s(Te(p.data)),s(ce(p.layout)),s(Se(E)),s(de(o))}else{let E=structuredClone(y);p.data.forEach(B=>{let U=E.find($=>"customType"in $&&$.customType==B.customType);U&&(U.visible=B.visible)}),s(Se(p.data)),s(de(p.layout)),s(Te(E)),s(ce(x))}},b=L=>{if(T)return!1;L.curveNumber!==void 0&&(T=!0,setTimeout(()=>{let R=L.data.filter(C=>C.mode!=="none"&&C.visible===!0&&!C.hasOwnProperty("customType"));try{if(p.data.forEach(C=>{const E=R.find(U=>C.customType===`${U.name}_dz`),B=R.find(U=>C.customType===`${U.name}_pdz`);E?C.visible=!!(j&&E.visible===!0):B?C.visible=!!(w&&B.visible===!0):!E&&!B&&C.hasOwnProperty("customType")&&(C.visible=!1)}),h(L),r=="ppm"){s(Te(p.data)),s(ce(p.layout));const C=structuredClone(m);g(C,R),s(Se(C))}else{s(Se(p.data)),s(de(p.layout));const C=structuredClone(y);g(C,R),s(Te(C))}T=!1}catch(C){console.log("GASES TAB ERROR"),console.log(C),T=!1}},500))},h=L=>{if(se(L,p.layout),te(p.layout),r==="ppm"){let R=Ft(p.layout,o);s(de(R))}else{let R=Ft(p.layout,x);s(ce(R))}},g=(L,R)=>{for(let C=0;C<L.length;C++){if(L[C].mode==="none")continue;let E=R.find(B=>B.name===L[C].name);if(E){L[C].visible=E.visible;let B=L.find($=>$.customType===`${L[C].name}_dz`);B&&(B.visible=!!(j&&L[C].visible===!0));let U=L.find($=>$.customType===`${L[C].name}_pdz`);U&&(U.visible=!!(w&&L[C].visible===!0))}else{if(L[C].hasOwnProperty("customType"))continue;{L[C].visible="legendonly";let B=L.find($=>$.customType===`${L[C].name}_dz`);B&&(B.visible=!1);let U=L.find($=>$.customType===`${L[C].name}_pdz`);U&&(U.visible=!1)}}}},I=L=>{s(an(L?"об.%":"ppm")),s(r==="ppm"?Te(p.data):Se(p.data)),s(r==="ppm"?ce(p.layout):de(p.layout))},z=J();d.useEffect(()=>{var L,R,C,E;if(z.url!==null&&z.url.length>0){if(l===D.idle||l===D.error)z.codeTab==="gases"&&z.codeSubTab==="charts"&&s(ds(z));else if(z.codeTab==="gases"&&z.codeSubTab==="charts"){const B=r==="ppm"?((L=y.find($=>{var K;return((K=$==null?void 0:$.customType)==null?void 0:K.includes("dz"))&&$.visible===!0}))==null?void 0:L.visible)??!1:((R=m.find($=>{var K;return((K=$==null?void 0:$.customType)==null?void 0:K.includes("dz"))&&$.visible===!0}))==null?void 0:R.visible)??!1,U=r==="ppm"?((C=y.find($=>{var K;return((K=$==null?void 0:$.customType)==null?void 0:K.includes("pdz"))&&$.visible===!0}))==null?void 0:C.visible)??!1:((E=m.find($=>{var K;return((K=$==null?void 0:$.customType)==null?void 0:K.includes("pdz"))&&$.visible===!0}))==null?void 0:E.visible)??!1;a(B),S(U)}}},[z.url]);const k=L=>{const{autorange:R}=p.layout;if(r==="ppm"){let C=structuredClone(o);C={...C,autorange:R},C.xaxis={...p.layout.xaxis},F(p.layout,C,"ppmToPercent"),s(ce(p.layout)),s(de(C))}else{let C=structuredClone(o);C={...C,autorange:R},C.xaxis={...p.layout.xaxis},F(p.layout,C,"percentToPpm"),s(ce(C)),s(de(p.layout))}},F=(L,R,C)=>{C==="percentToPpm"&&Object.keys(L).forEach(E=>{E.includes("yaxis")&&(R[E].autorange=L[E].autorange,R[E].range=[L[E].range[0]*1e4,L[E].range[1]*1e4])}),C==="ppmToPercent"&&Object.keys(L).forEach(E=>{E.includes("yaxis")&&(R[E].autorange=L[E].autorange,R[E].range=[L[E].range[0]/1e4,L[E].range[1]/1e4])})};return l===D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ee,{limitVisibleHandler:n,isDisplayDz:j,isDisplayPdz:w}),e.jsx(Eo,{SwitcherHandler:I,isVol:r!=="ppm"}),!1,!1]}),r=="ppm"?e.jsx(Q,{useResizeHandler:!0,data:structuredClone(y),layout:{...structuredClone(x),width:t,height:c},config:W.GetConfig(),onUpdate:L=>p=L,onLegendClick:L=>b(L),onRelayout:L=>k()}):e.jsx(Q,{useResizeHandler:!0,data:structuredClone(m),layout:{...structuredClone(o),width:t,height:c},config:W.GetConfig(),onUpdate:L=>p=L,onLegendClick:L=>b(L),onRelayout:L=>k()}),!1,!1]})},Ro=({width:t,height:c})=>{const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const m=window.matchMedia(M);return m.addEventListener("change",j=>_(f,j.matches)),()=>m.removeEventListener("change",_)},[]);const s=G(),l=v(nn),r=v(ln),x=v(on),y=v(N),o=J();return d.useEffect(()=>{o.url!==null&&o.url.length>0&&(l===D.idle||l===D.error)&&o.codeTab==="gases"&&o.codeSubTab==="triangle"&&s(ms(o))},[o.url]),l==D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{sx:{display:"flex"},children:[e.jsxs(i,{sx:{border:"1px solid #003274",borderRadius:"5px",margin:"0 1%",position:"absolute",left:0,top:u?"225px":"250px",zIndex:1e3,fontSize:u?"0.8em":"1em",color:"#003274"},children:[e.jsxs(i,{sx:{...ge,...P},children:[e.jsx(i,{sx:{...fe,background:"#f4ecea"}}),e.jsxs(i,{children:["T1: ",y.thermalDefectInLowTemperatureRangeLabel]})]}),e.jsxs(i,{sx:{...ge,...P},children:[e.jsx(i,{sx:{...fe,background:"#f0cac1"}}),e.jsxs(i,{children:["T2: ",y.thermalDefectInMiddleTemperatureRangeLabel]})]}),e.jsxs(i,{sx:{...ge,...P},children:[e.jsx(i,{sx:{...fe,background:"#c89c82"}}),e.jsxs(i,{children:["T3: ",y.thermalDefectInHighTemperatureRangeLabel]})]}),e.jsxs(i,{sx:{...ge,...P},children:[e.jsx(i,{sx:{...fe,background:"#005686"}}),e.jsxs(i,{children:["D1: ",y.lowEnergySparkDischargeLabel]})]}),e.jsxs(i,{sx:{...ge,...P},children:[e.jsx(i,{sx:{...fe,background:"#7fc7e2"}}),e.jsxs(i,{children:["D2: ",y.highEnergySparkDischargeLabel]})]}),e.jsxs(i,{sx:{...ge,...P},children:[e.jsx(i,{sx:{...fe,background:"#dccfe2"}}),e.jsxs(i,{children:["DT: ",y.compositionOfElectricalAndThermalDefectsLabel]})]}),e.jsxs(i,{sx:{...ge,...P},children:[e.jsx(i,{sx:{...fe,background:"#9b8fa4"}}),e.jsxs(i,{children:["PD: ",y.pdLabel]})]})]}),e.jsx(Q,{useResizeHandler:!0,data:structuredClone(r),layout:{...structuredClone(x),width:t-50,height:c-30},config:W.GetConfig()})]})},ge={display:"flex",alignItems:"center",margin:"0 1%",width:"95%"},fe={width:"15px",height:"15px",margin:"0 1%"},Ho=({width:t,height:c})=>{const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const m=window.matchMedia(M);return m.addEventListener("change",j=>_(f,j.matches)),()=>m.removeEventListener("change",_)},[]);const s=G(),l=v(rn),r=v(N),x=v(cn),y=v(dn),o=J();return d.useEffect(()=>{o.url!==null&&o.url.length>0&&(l===D.idle||l===D.error)&&o.codeTab==="gases"&&o.codeSubTab==="pentagon"&&s(ps(o))},[o.url]),l==D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:[e.jsxs(i,{sx:{border:"1px solid #003274",borderRadius:"5px",margin:"0 1%",position:"absolute",left:0,top:u?"195px":"250px",zIndex:1e3,fontSize:u?"0.7em":"1em",color:"#003274"},children:[e.jsxs(i,{sx:{...be,...P},children:[e.jsx(i,{sx:{...xe,background:"#f4ecea"}}),e.jsxs(i,{children:["T1: ",r.thermalDefectInLowTemperatureRangeLabel]})]}),e.jsxs(i,{sx:{...be,...P},children:[e.jsx(i,{sx:{...xe,background:"#f0cac1"}}),e.jsxs(i,{children:["T2: ",r.thermalDefectInMiddleTemperatureRangeLabel]})]}),e.jsxs(i,{sx:{...be,...P},children:[e.jsx(i,{sx:{...xe,background:"#c89c82"}}),e.jsxs(i,{children:["T3: ",r.thermalDefectInHighTemperatureRangeLabel]})]}),e.jsxs(i,{sx:{...be,...P},children:[e.jsx(i,{sx:{...xe,background:"#005686"}}),e.jsxs(i,{children:["D1: ",r.lowEnergySparkDischargeLabel]})]}),e.jsxs(i,{sx:{...be,...P},children:[e.jsx(i,{sx:{...xe,background:"#7fc7e2"}}),e.jsxs(i,{children:["D2: ",r.highEnergySparkDischargeLabel]})]}),e.jsxs(i,{sx:{...be,...P},children:[e.jsx(i,{sx:{...xe,background:"#90af9d"}}),e.jsxs(i,{children:["S: ",r.mineralOilGassingLabel]})]}),e.jsxs(i,{sx:{...be,...P},children:[e.jsx(i,{sx:{...xe,background:"#9b8fa4"}}),e.jsxs(i,{children:["PD: ",r.pdLabel]})]})]}),e.jsx(i,{sx:{marginLeft:"10%"},children:e.jsx(Q,{useResizeHandler:!0,data:structuredClone(x),layout:{...structuredClone(y),width:t,height:c},config:{...W.GetConfig(),scrollZoom:!1}})})]})},be={display:"flex",alignItems:"center",margin:"0 1%",width:"95%"},xe={width:"15px",height:"15px",margin:"0 1%"},Io={title:{text:""},legend:{xanchor:"right",traceorder:"normal",font:{family:P.fontFamily,size:12,color:"#000"},bgcolor:"#E2E2E2",bordercolor:"rgba(186, 186, 186, 0.8)",borderwidth:2},autosize:!1,paper_bgcolor:"transparent",plot_bgcolor:"transparent",showlegend:!0},Mo=({width:t,height:c})=>{var S;const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const p=window.matchMedia(M);return p.addEventListener("change",T=>_(f,T.matches)),()=>p.removeEventListener("change",_)},[]);const s=G(),l=v(un),r=v(hn),x=v(ne),y=v(N),[o,m]=d.useState(),[j,a]=d.useState(),w=J();return d.useEffect(()=>{w.url!==null&&w.url.length>0&&(l===D.idle||l===D.error)&&w.codeTab==="gases"&&w.codeSubTab==="rdnomogram"&&s(gn(w))},[w.url]),d.useLayoutEffect(()=>{r&&(m({x:r.gases,y:r.fact,name:y.factLabel,line:{color:"rgba(39, 123, 245, 0.8)"},legendgroup:"group1"}),a({x:r.gases,y:r.etalon,name:y.etalonLabel,line:{color:"orange"},legendgroup:"group2"}))},[r,x]),l==D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{children:[e.jsx(i,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(i,{sx:{...Z,margin:"0 1%"},children:((S=r==null?void 0:r.data)==null?void 0:S.split(".")[0].replace("T"," "))??""})}),r===null||Object.keys(r).length===0?e.jsx(i,{sx:{width:"100%",height:"70vh",display:"flex",alignItems:"center",justifyContent:"center",...Z,...A},children:y.noDefectsFoundNomogramLabel}):e.jsx(Q,{useResizeHandler:!0,data:[o,j],layout:{...structuredClone(Io),width:t,height:c-30},config:W.GetConfig()}),e.jsx(i,{sx:{...P,color:"#003274",marginLeft:"1%",fontSize:u?"1em":"1.2em"},children:(r==null?void 0:r.message)??""})]})},_o=[{numberRow:"1",defect:"Нормально","C2H2/C2H4":"<0.1","CH4/H2":"0.1-1","C2H4/C2H6":"≤1",exampels:"Нормальное старение"},{numberRow:"2",defect:"ЧР с низкой плотностью энергии","C2H2/C2H4":"<0.1","CH4/H2":"<0.1","C2H4/C2H6":"≤1",exampels:"Разряды в заполненных газом полостях"},{numberRow:"3",defect:"ЧР с высокой плотностью энергии","C2H2/C2H4":"0.1-3","CH4/H2":"<0.1","C2H4/C2H6":"≤1",exampels:"Разряды в заполненных газом полостях"},{numberRow:"4",defect:"Разряды малой мощности","C2H2/C2H4":">0.1","CH4/H2":"0.1-1","C2H4/C2H6":"1-3",exampels:"Непрерывное искрение в масле"},{numberRow:"5",defect:"Разряды большой мощности","C2H2/C2H4":"0.1-3","CH4/H2":"0.1-1","C2H4/C2H6":"≥3",exampels:"Дуговые разряды"},{numberRow:"6",defect:"Термический дефект низкой температуры (до 150 град.С)","C2H2/C2H4":"<0.1","CH4/H2":"0.1-1","C2H4/C2H6":"1-3",exampels:"Перегрев изолированного проводника"},{numberRow:"7",defect:"Термический дефект в диапазоне низких температур (150-300 град.С)","C2H2/C2H4":"<0.1","CH4/H2":"≥1","C2H4/C2H6":"<1",exampels:"Местный перегрев сердечника"},{numberRow:"8",defect:"Термический дефект в диапазоне средних температур (300-700 град.С)","C2H2/C2H4":"<0.1","CH4/H2":"≥1","C2H4/C2H6":"1-3",exampels:"Местный перегрев сердечника"},{numberRow:"9",defect:"Термический дефект высокой температуры (более 700 град.С)","C2H2/C2H4":"<0.1","CH4/H2":"≥1","C2H4/C2H6":"≥3",exampels:"Горячая точка в сердечнике"}],Po=({width:t,height:c})=>{const u=G(),f=v(N),s=v(ne),l=v(fn);let r=v(bn);const[x,y]=d.useState(),o=J();return d.useEffect(()=>{o.url!==null&&o.url.length>0&&(l===D.idle||l===D.error)&&o.codeTab==="gases"&&o.codeSubTab==="rdTable"&&u(xn(o))},[o.url]),d.useEffect(()=>{o.codeSubTab==="rdTable"&&y(r!==null?$o(r,_o):[])},[r,s]),l===D.loading?e.jsx(Y,{height:75}):e.jsx(i,{sx:{width:"98%",height:`${c}px`,paddingLeft:"1%"},children:e.jsxs(ie,{withColumnBorders:!0,withBorder:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"5%",...ye,...A},children:"№"}),e.jsx("th",{style:{width:"40%",...ye,...A},children:f.defectLabel}),e.jsx("th",{style:{width:"5%",...ye,...A},children:"C2H2/C2H4"}),e.jsx("th",{style:{width:"5%",...ye,...A},children:"CH4/H2"}),e.jsx("th",{style:{width:"5%",...ye,...A},children:"C2H4/C2H6"}),e.jsx("th",{style:{width:"40%",...ye,...A},children:f.typicalExamplesLabel})]})}),e.jsx("tbody",{children:x})]})})},ye={textAlign:"center",...Z},Ao=t=>{let c={bg:null,text:null};return t===null?(c.bg="gray",c.text="white"):t===1?(c.bg=ve.dangerousColor,c.text="white"):(c.bg="transparent",c.text=Z.color),c};function $o(t,c){return Object.keys(t).map(u=>{const f=Object.keys(t[u]);f.unshift(u);const s=c.find(l=>l.numberRow===u);return s.defect=t[u].defect,s.exampels=t[u].exampels,e.jsx("tr",{children:f.map((l,r)=>{const x=Ao(t[u][l]);return e.jsx("td",{style:{padding:"0 5px",textAlign:[1,5].includes(r)?"":"center",background:[2,3,4].includes(r)?x.bg:"transparent",color:[2,3,4].includes(r)?x.text:Z.color},children:r===0?l:s[l]},O())})},O())})}const Oo={statusLoading:D.idle,sourceData:null},Go=Vs({name:"subTabSTOTableSlice",initialState:Oo,reducers:{setSTOTableStatusLoading:(t,c)=>{t.statusLoading=c.payload}},extraReducers:t=>{t.addCase(Me.pending,(c,u)=>{c.statusLoading=D.loading}).addCase(Me.rejected,(c,u)=>{c.statusLoading=D.error}).addCase(Me.fulfilled,(c,u)=>{c.statusLoading=D.success,c.sourceData=u.payload.values})}}),Me=Ys("subTabSTOTableSlice/SubTabSTOTableQuery",async(t,c)=>await fetch(t.url).then(f=>f.json())),Bo=t=>t.subTabSTO.sourceData,No=t=>t.subTabSTO.statusLoading,Fo=Go.reducer,Zo=[{numberRow:"1",defect:"ЧР","C2H2/C2H4":"-","CH4/H2":"<0.1","C2H4/C2H6":"<0.2"},{numberRow:"2",defect:"Искровые разряды низкой энергии","C2H2/C2H4":">1","CH4/H2":"0.1-0.5","C2H4/C2H6":">1"},{numberRow:"3",defect:"Искровые разряды высокой энергии, дуга","C2H2/C2H4":"0.6-2.5","CH4/H2":"0.1-1","C2H4/C2H6":">2"},{numberRow:"4",defect:"Термический дефект низкой температуры (до 300 град.С)","C2H2/C2H4":"-","CH4/H2":">1","C2H4/C2H6":"<1"},{numberRow:"5",defect:"Термический дефект средней температуры (300-700 град.С)","C2H2/C2H4":"<0.1","CH4/H2":">1","C2H4/C2H6":"1-4"},{numberRow:"6",defect:"Термический дефект высокой температуры (более 700 град.С)","C2H2/C2H4":"<0.2","CH4/H2":">1","C2H4/C2H6":">4"}],Uo=({width:t,height:c})=>{const u=G(),f=v(N),s=v(ne),l=v(No);let r=v(Bo);const[x,y]=d.useState(),o=J();return d.useEffect(()=>{o.url!==null&&o.url.length>0&&(l===D.idle||l===D.error)&&o.codeTab==="gases"&&o.codeSubTab==="stoTable"&&u(Me(o))},[o.url]),d.useLayoutEffect(()=>{o.codeSubTab==="stoTable"&&y(r!==null?Wo(r,Zo):[])},[r,s]),l===D.loading?e.jsx(Y,{height:75}):e.jsx(i,{sx:{width:"98%",height:`${c}px`,paddingLeft:"1%"},children:e.jsxs(ie,{withColumnBorders:!0,withBorder:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"5%",...Ce,...A},children:"№"}),e.jsx("th",{style:{width:"40%",...Ce,...A},children:f.defectLabel}),e.jsx("th",{style:{width:"5%",...Ce,...A},children:"C2H2/C2H4"}),e.jsx("th",{style:{width:"5%",...Ce,...A},children:"CH4/H2"}),e.jsx("th",{style:{width:"5%",...Ce,...A},children:"C2H4/C2H6"})]})}),e.jsx("tbody",{children:x})]})})},Ce={textAlign:"center",...Z},Qo=t=>{let c={bg:null,text:null};return t===null?(c.bg="gray",c.text="white"):t===1?(c.bg=ve.dangerousColor,c.text="white"):(c.bg="transparent",c.text=Z.color),c};function Wo(t,c){return Object.keys(t).map(u=>{const f=Object.keys(t[u]);f.unshift(u);const s=c.find(l=>l.numberRow===u);return e.jsx("tr",{children:f.map((l,r)=>{const x=Qo(t[u][l]);return e.jsx("td",{style:{padding:"0 5px",textAlign:[1,5].includes(r)?"":"center",background:[2,3,4].includes(r)?x.bg:"transparent",color:[2,3,4].includes(r)?x.text:Z.color},children:r===0?l:s[l]},O())})},O())})}const Vo=({width:t,height:c})=>{const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const o=window.matchMedia(M);return o.addEventListener("change",m=>_(f,m.matches)),()=>o.removeEventListener("change",_)},[]);const s=G(),l=v(N),[r,x]=d.useState("charts"),y=o=>{s(me(o)),x(o)};return e.jsxs(H,{value:r,onTabChange:o=>y(o),styles:{root:{marginTop:"2px"},tab:{...P,fontSize:u?"0.8em":"1em",color:"#003274","&:hover":{background:"#003274",color:"white"}}},children:[e.jsxs(H.List,{children:[e.jsx(X,{label:l.chartsLabel,color:"#003274",withArrow:!0,position:"top",children:e.jsx(H.Tab,{value:"charts",children:l.chartsLabel})}),e.jsx(X,{label:l.methodRelationKeyGasesRDLabel,color:"#003274",withArrow:!0,position:"top",children:e.jsx(H.Tab,{value:"rdTable",children:l.rdTabelLabel})}),e.jsx(X,{label:l.methodDiagrammGasesRdLabel,color:"#003274",withArrow:!0,position:"top",children:e.jsx(H.Tab,{value:"rdnomogram",children:l.rdNomogrammLabel})}),e.jsx(X,{label:l.duvaleTriangleByMEKLabel,color:"#003274",withArrow:!0,position:"top",children:e.jsxs(H.Tab,{value:"triangle",children:["△ ",l.duvaleLabel]})}),e.jsx(X,{label:l.duvalePentagonLabel,color:"#003274",withArrow:!0,position:"top",children:e.jsxs(H.Tab,{value:"pentagon",children:["⬠ ",l.duvaleLabel]})})]}),e.jsx(H.Panel,{value:"charts",pt:"xs",children:e.jsx(ko,{width:t,height:c-50})}),e.jsx(H.Panel,{value:"rdTable",pt:"xs",children:e.jsx(Po,{width:t,height:c-50})}),e.jsx(H.Panel,{value:"stoTable",pt:"xs",children:e.jsx(Uo,{height:c-50})}),e.jsx(H.Panel,{value:"rdnomogram",pt:"xs",children:e.jsx(Mo,{width:t,height:c-70})}),e.jsx(H.Panel,{value:"triangle",pt:"xs",children:e.jsx(Ro,{width:t,height:c-50})}),e.jsx(H.Panel,{value:"pentagon",pt:"xs",children:e.jsx(Ho,{width:t-Math.abs(c-t)+50,height:c-50})})]})},Ve=({values:t,isFirst:c})=>{const[u,f]=d.useState(null);return d.useLayoutEffect(()=>{const s=[];for(let l=1;l<t.length;l++){const r=t[l].map(x=>e.jsx("td",{style:{padding:"0 2px",border:"1px solid black",borderLeft:c?"1px solid black":"0px solid black",textAlign:"center",background:x.hasOwnProperty("status")?mn.find(y=>y.title===x.status).color:""},children:x.value??"-"},O()));s.push(e.jsx("tr",{children:r},O()))}f(s)},[]),e.jsxs(i,{children:[e.jsx(i,{sx:{textAlign:"center",borderTop:"1px solid black",borderLeft:c?"1px solid black":"0px solid black",borderRight:"1px solid black"},children:t[0][0].value}),e.jsx(ie,{children:e.jsx("tbody",{children:u})})]})},Yo=({width:t,height:c})=>{const u=G(),f=v(pn);v(yn);const s=v(vn),l=v(wn),r=v(jn),[x,y]=d.useState(null),o=v(Tn),m=v(Sn),[j,a]=d.useState(),[w,S]=d.useState();let p=null;const T=(g,I)=>{let z=[];g==="dz"&&(a(I),z=p.data.filter(k=>k.mode!=="none"&&k.visible===!0).map(k=>`${k.name}_dz`)),g==="pdz"&&(S(I),z=p.data.filter(k=>k.mode!=="none"&&k.visible===!0).map(k=>`${k.name}_pdz`)),p.data.forEach(k=>{z.includes(k.customType)&&(k.visible=I)}),u(pt(p.data)),u(We(p.layout))},n=g=>{let I=g.data.find(z=>z.name===g.node.childNodes[0].innerHTML);I==null&&(I=g.layout.shapes[g.curveNumber]),I.hasOwnProperty("group")?setTimeout(()=>{try{p.layout.shapes.forEach(z=>{z.group==I.group&&(z.visible=I.visible)}),console.log(p),u(We(p.layout))}catch(z){console.log("OVERVOLTAGE ERROR LAYOUT"),console.log(z)}},500):setTimeout(()=>{try{let z=g.data[g.curveNumber];b(g),p.data.forEach(k=>{k.customType===`${z.name}_dz`&&(k.visible=!!(j&&z.visible===!0)),k.customType===`${z.name}_pdz`&&(k.visible=!!(w&&z.visible===!0))}),u(pt(p.data)),u(We(p.layout))}catch(z){console.log("Overvoltage TAB ERROR"),console.log(z)}},500)},b=g=>{se(g,p.layout),te(p.layout)},h=J();return d.useEffect(()=>{var g,I;h.url!==null&&h.url.length>0&&(f===D.idle||f===D.error?h.codeTab==="overvoltage"&&u(gs(h)):h.codeTab==="overvoltage"&&(a(((g=m.find(z=>{var k;return((k=z==null?void 0:z.customType)==null?void 0:k.includes("dz"))&&z.visible===!0}))==null?void 0:g.visible)??!1),S(((I=m.find(z=>{var k;return((k=z==null?void 0:z.customType)==null?void 0:k.includes("pdz"))&&z.visible===!0}))==null?void 0:I.visible)??!1)))},[h.url]),d.useLayoutEffect(()=>{const g=[];s&&g.push(e.jsx(Ve,{values:s,isFirst:!0},O())),l&&g.push(e.jsx(Ve,{values:l,isFirst:!1},O())),r&&g.push(e.jsx(Ve,{values:r,isFirst:!1},O())),y(g)},[s,l,r]),f===D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ee,{limitVisibleHandler:T,isDisplayDz:j,isDisplayPdz:w}),e.jsx(i,{sx:{display:"flex",width:"100%",...P},children:x})]}),e.jsx(i,{sx:{width:"100%",display:"flex"},children:e.jsx(Q,{useResizeHandler:!0,data:structuredClone(m),layout:{...structuredClone(o),width:t,height:c},config:W.GetConfig(),onUpdate:g=>p=g,onLegendClick:g=>n(g)})})]})},Jo=({width:t,height:c})=>{const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const n=window.matchMedia(M);return n.addEventListener("change",b=>_(f,b.matches)),()=>n.removeEventListener("change",_)},[]);const s=G(),l=v(Ln);v(N);const r=v(Cn),x=v(Dn),[y,o]=d.useState(),[m,j]=d.useState();d.useState();let a=null;const w=(n,b)=>{let h=[];n==="dz"&&(o(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_dz`)),n==="pdz"&&(j(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_pdz`)),a.data.forEach(g=>{h.includes(g.customType)&&(g.visible=b)}),s(yt(a.data)),s(vt(a.layout))},S=n=>{setTimeout(()=>{try{let b=n.data[n.curveNumber];p(n),a.data.forEach(h=>{h.customType===`${b.name}_dz`&&(h.visible=!!(y&&b.visible===!0)),h.customType===`${b.name}_pdz`&&(h.visible=!!(m&&b.visible===!0))}),s(yt(a.data)),s(vt(a.layout))}catch(b){console.log("MOISTURE TAB ERROR"),console.log(b)}},500)},p=n=>{se(n,a.layout),te(a.layout)},T=J();return d.useEffect(()=>{var n,b;T.url!==null&&T.url.length>0&&(l===D.idle||l===D.error?T.codeTab==="humidity"&&s(us(T)):T.codeTab==="humidity"&&(o(((n=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("dz"))&&h.visible===!0}))==null?void 0:n.visible)??!1),j(((b=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("pdz"))&&h.visible===!0}))==null?void 0:b.visible)??!1)))},[T.url]),l===D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ee,{limitVisibleHandler:w,isDisplayDz:y,isDisplayPdz:m}),!1]}),e.jsx(Q,{useResizeHandler:!0,data:structuredClone(x),layout:{...structuredClone(r),width:t,height:c-30},config:W.GetConfig(),onUpdate:n=>a=n,onLegendClick:n=>S(n)}),!1]})},Ko=({width:t,height:c})=>{const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const m=window.matchMedia(M);return m.addEventListener("change",j=>_(f,j.matches)),()=>m.removeEventListener("change",_)},[]);const s=G(),l=v(zn),r=v(N),x=v(En),y=v(kn),o=J();return d.useEffect(()=>{o.url!==null&&o.url.length>0&&(l===D.idle||l===D.error)&&o.codeTab==="humidity"&&o.codeSubTab==="hysteresis"&&s(hs(o))},[o.url]),l===D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{children:[e.jsx(i,{sx:{...P,...Z,marginLeft:"1%",fontSize:u?"1em":"1.2em"},children:r.hysteresisChartLabel}),e.jsx(Q,{useResizeHandler:!0,data:structuredClone(y),layout:{...structuredClone(x),width:t,height:c-30},config:W.GetConfig()})]})},qo=({width:t,height:c})=>{const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const o=window.matchMedia(M);return o.addEventListener("change",m=>_(f,m.matches)),()=>o.removeEventListener("change",_)},[]);const s=G(),l=v(N),[r,x]=d.useState("charts"),y=o=>{s(me(o)),x(o)};return e.jsxs(H,{value:r,onTabChange:o=>y(o),styles:{root:{marginTop:"2px"},tab:{...P,fontSize:u?"0.8em":"1em",color:"#003274","&:hover":{background:"#003274",color:"white"}}},children:[e.jsxs(H.List,{children:[e.jsx(X,{label:l.chartsLabel,color:"#003274",withArrow:!0,position:"top",children:e.jsx(H.Tab,{value:"charts",children:l.chartsLabel})}),e.jsx(X,{label:l.hysteresisLabel,color:"#003274",withArrow:!0,position:"top",children:e.jsx(H.Tab,{value:"hysteresis",children:l.hysteresisLabel})})]}),e.jsx(H.Panel,{value:"charts",pt:"xs",children:e.jsx(Jo,{width:t-20,height:c-50})}),e.jsx(H.Panel,{value:"hysteresis",pt:"xs",children:e.jsx(Ko,{width:t-20,height:c-50})})]})},Xo=({width:t,height:c})=>{const u=G(),f=v(Rn),s=v(Hn),l=v(In),[r,x]=d.useState(!1),[y,o]=d.useState(!1);let m=null;const j=(p,T)=>{let n=[];p==="dz"&&(x(T),n=m.data.filter(b=>b.mode!=="none"&&b.visible===!0).map(b=>`${b.name}_dz`)),p==="pdz"&&(o(T),n=m.data.filter(b=>b.mode!=="none"&&b.visible===!0).map(b=>`${b.name}_pdz`)),m.data.forEach(b=>{n.includes(b.customType)&&(b.visible=T)}),u(wt(m.data)),u(jt(m.layout))},a=p=>{setTimeout(()=>{try{let T=p.data[p.curveNumber];w(p),m.data.forEach(n=>{n.customType===`${T.name}_dz`&&(n.visible=!!(r&&T.visible===!0)),n.customType===`${T.name}_pdz`&&(n.visible=!!(y&&T.visible===!0))}),u(wt(m.data)),u(jt(m.layout))}catch(T){console.log("TEMPERATURE TAB ERROR"),console.log(T)}},500)},w=p=>{se(p,m.layout),te(m.layout)},S=J();return d.useEffect(()=>{var p,T;S.url!==null&&S.url.length>0&&(f===D.idle||f===D.error?S.codeTab==="temperature"&&u(xs(S)):S.codeTab==="temperature"&&(x(((p=l.find(n=>{var b;return((b=n==null?void 0:n.customType)==null?void 0:b.includes("dz"))&&n.visible===!0}))==null?void 0:p.visible)??!1),o(((T=l.find(n=>{var b;return((b=n==null?void 0:n.customType)==null?void 0:b.includes("pdz"))&&n.visible===!0}))==null?void 0:T.visible)??!1)))},[S.url]),f===D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{children:[e.jsx(i,{sx:{display:"flex",alignItems:"center"},children:e.jsx(ee,{limitVisibleHandler:j,isDisplayDz:r,isDisplayPdz:y})}),e.jsx(Q,{useResizeHandler:!0,data:structuredClone(l),layout:{...structuredClone(s),width:t,height:c},config:W.GetConfig(),onUpdate:p=>m=p,onLegendClick:p=>a(p)})]})},ei=({width:t,height:c})=>{const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const n=window.matchMedia(M);return n.addEventListener("change",b=>_(f,b.matches)),()=>n.removeEventListener("change",_)},[]);const s=G(),l=v(Mn),r=v(_n),x=v(Pn),[y,o]=d.useState(),[m,j]=d.useState();let a=null;const w=(n,b)=>{let h=[];n==="dz"&&(o(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_dz`)),n==="pdz"&&(j(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_pdz`)),a.data.forEach(g=>{h.includes(g.customType)&&(g.visible=b)}),s(Tt(a.data)),s(St(a.layout))},S=n=>{setTimeout(()=>{let b=n.data[n.curveNumber];try{p(n),a.data.forEach(h=>{h.customType===`${b.name}_dz`&&(h.visible=!!(y&&b.visible===!0)),h.customType===`${b.name}_pdz`&&(h.visible=!!(m&&b.visible===!0))})}catch(h){console.log("GASES TAB ERROR"),console.log(h)}s(Tt(a.data)),s(St(a.layout))},500)},p=n=>{se(n,a.layout),te(a.layout)},T=J();return d.useEffect(()=>{var n,b;T.url!==null&&T.url.length>0&&(l===D.idle||l===D.error?T.codeTab==="its"&&s(ws(T)):T.codeTab==="its"&&(o(((n=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("dz"))&&h.visible===!0}))==null?void 0:n.visible)??!1),j(((b=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("pdz"))&&h.visible===!0}))==null?void 0:b.visible)??!1)))},[T.url]),l===D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{children:[e.jsx(i,{sx:{display:"flex",alignItems:"center"},children:e.jsx(ee,{limitVisibleHandler:w,isDisplayDz:y,isDisplayPdz:m})}),e.jsx(Q,{useResizeHandler:!0,data:structuredClone(x),layout:{...structuredClone(r),width:t,height:c},config:W.GetConfig(),onUpdate:n=>a=n,onLegendClick:n=>S(n)})]})},ti=({width:t,height:c})=>{const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const n=window.matchMedia(M);return n.addEventListener("change",b=>_(f,b.matches)),()=>n.removeEventListener("change",_)},[]);const s=G(),l=v(An),r=v($n),x=v(On),[y,o]=d.useState(),[m,j]=d.useState();let a=null;const w=(n,b)=>{let h=[];n==="dz"&&(o(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_dz`)),n==="pdz"&&(j(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_pdz`)),a.data.forEach(g=>{h.includes(g.customType)&&(g.visible=b)}),s(Lt(a.data)),s(Ct(a.layout))},S=n=>{setTimeout(()=>{try{let b=n.data[n.curveNumber];p(n),a.data.forEach(h=>{h.customType===`${b.name}_dz`&&(h.visible=!!(y&&b.visible===!0)),h.customType===`${b.name}_pdz`&&(h.visible=!!(m&&b.visible===!0))}),s(Lt(a.data)),s(Ct(a.layout))}catch(b){console.log("WEAR TAB ERROR"),console.log(b)}},500)},p=n=>{se(n,a.layout),te(a.layout)},T=J();return d.useEffect(()=>{var n,b;T.url!==null&&T.url.length>0&&(l===D.idle||l===D.error?T.codeTab==="wear"&&s(vs(T)):T.codeTab==="wear"&&(o(((n=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("dz"))&&h.visible===!0}))==null?void 0:n.visible)??!1),j(((b=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("pdz"))&&h.visible===!0}))==null?void 0:b.visible)??!1)))},[T.url]),l===D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{children:[e.jsx(i,{sx:{display:"flex",alignItems:"center"},children:e.jsx(ee,{limitVisibleHandler:w,isDisplayDz:y,isDisplayPdz:m})}),e.jsx(Q,{useResizeHandler:!0,data:structuredClone(x),layout:{...structuredClone(r),width:t,height:c-30},config:W.GetConfig(),onUpdate:n=>a=n,onLegendClick:n=>S(n)})]})},si=({width:t,height:c})=>{const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const n=window.matchMedia(M);return n.addEventListener("change",b=>_(f,b.matches)),()=>n.removeEventListener("change",_)},[]);const s=G(),l=v(Gn);v(N);const r=v(Bn),x=v(Nn),[y,o]=d.useState(),[m,j]=d.useState();d.useState(!1);let a=null;const w=(n,b)=>{let h=[];n==="dz"&&(o(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_dz`)),n==="pdz"&&(j(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_pdz`)),a.data.forEach(g=>{h.includes(g.customType)&&(g.visible=b)}),s(Dt(a.data)),s(zt(a.layout))},S=n=>{setTimeout(()=>{try{let b=n.data[n.curveNumber];p(n),a.data.forEach(h=>{h.customType===`${b.name}_dz`&&(h.visible=!!(y&&b.visible===!0)),h.customType===`${b.name}_pdz`&&(h.visible=!!(m&&b.visible===!0))}),s(Dt(a.data)),s(zt(a.layout))}catch(b){console.log("BUSHING TAB ERROR"),console.log(b)}},500)},p=n=>{se(n,a.layout),te(a.layout)},T=J();return d.useEffect(()=>{var n,b;T.url!==null&&T.url.length>0&&(l===D.idle||l===D.error?T.codeTab==="bushing"&&s(ys(T)):T.codeTab==="bushing"&&(o(((n=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("dz"))&&h.visible===!0}))==null?void 0:n.visible)??!1),j(((b=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("pdz"))&&h.visible===!0}))==null?void 0:b.visible)??!1)))},[T.url]),l===D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ee,{limitVisibleHandler:w,isDisplayDz:y,isDisplayPdz:m}),!1]}),e.jsx(Q,{useResizeHandler:!0,data:structuredClone(x),layout:{...structuredClone(r),width:t,height:c},config:W.GetConfig(),onUpdate:n=>a=n,onLegendClick:n=>S(n)}),!1]})},ai=({width:t,height:c})=>{const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const n=window.matchMedia(M);return n.addEventListener("change",b=>_(f,b.matches)),()=>n.removeEventListener("change",_)},[]);const s=G(),l=v(Fn),r=v(Zn),x=v(Un),[y,o]=d.useState(),[m,j]=d.useState();d.useState();let a=null;const w=(n,b)=>{let h=[];n==="dz"&&(o(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_dz`)),n==="pdz"&&(j(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_pdz`)),a.data.forEach(g=>{h.includes(g.customType)&&(g.visible=b)}),s(Et(a.data)),s(kt(a.layout))},S=n=>{n.data[n.curveNumber].mode!=="none"&&setTimeout(()=>{let b=n.data[n.curveNumber];p(n),a.data.forEach(h=>{h.customType===`${b.name}_dz`&&(h.visible=!!(y&&b.visible===!0)),h.customType===`${b.name}_pdz`&&(h.visible=!!(m&&b.visible===!0))}),s(Et(a.data)),s(kt(a.layout))},500)},p=n=>{se(n,a.layout),te(a.layout)},T=J();return d.useEffect(()=>{var n,b;T.url!==null&&T.url.length>0&&(l===D.idle||l===D.error?T.codeTab==="pd"&&s(js(T)):T.codeTab==="pd"&&(o(((n=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("dz"))&&h.visible===!0}))==null?void 0:n.visible)??!1),j(((b=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("pdz"))&&h.visible===!0}))==null?void 0:b.visible)??!1)))},[T.url]),l===D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{children:[e.jsx(i,{sx:{display:"flex",alignItems:"center"},children:e.jsx(ee,{limitVisibleHandler:w,isDisplayDz:y,isDisplayPdz:m})}),e.jsx(Q,{useResizeHandler:!0,data:structuredClone(x),layout:{...structuredClone(r),width:t,height:c-30},config:W.GetConfig(),onUpdate:n=>a=n,onLegendClick:n=>S(n)})]})},ni=({width:t,height:c})=>{const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const n=window.matchMedia(M);return n.addEventListener("change",b=>_(f,b.matches)),()=>n.removeEventListener("change",_)},[]);const s=G(),l=v(Qn),r=v(Wn),x=v(Vn),[y,o]=d.useState(),[m,j]=d.useState();let a=null;const w=(n,b)=>{let h=[];n==="dz"&&(o(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_dz`)),n==="pdz"&&(j(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_pdz`)),a.data.forEach(g=>{h.includes(g.customType)&&(g.visible=b)}),s(Rt(a.data)),s(Ht(a.layout))},S=n=>{n.data[n.curveNumber].mode!=="none"&&setTimeout(()=>{let b=n.data[n.curveNumber];p(n),a.data.forEach(h=>{h.customType===`${b.name}_dz`&&(h.visible=!!(y&&b.visible===!0)),h.customType===`${b.name}_pdz`&&(h.visible=!!(m&&b.visible===!0))}),s(Rt(a.data)),s(Ht(a.layout))},500)},p=n=>{se(n,a.layout),te(a.layout)},T=J();return d.useEffect(()=>{var n,b;T.url!==null&&T.url.length>0&&(l===D.idle||l===D.error?T.codeTab==="sf6"&&s(Ts(T)):T.codeTab==="sf6"&&(o(((n=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("dz"))&&h.visible===!0}))==null?void 0:n.visible)??!1),j(((b=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("pdz"))&&h.visible===!0}))==null?void 0:b.visible)??!1)))},[T.url]),l===D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{children:[e.jsx(i,{sx:{display:"flex",alignItems:"center"},children:e.jsx(ee,{limitVisibleHandler:w,isDisplayDz:y,isDisplayPdz:m})}),e.jsx(Q,{useResizeHandler:!0,data:structuredClone(x),layout:{...structuredClone(r),width:t,height:c-30},config:W.GetConfig(),onUpdate:n=>a=n,onLegendClick:n=>S(n)})]})},li=()=>{const[t,c]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const o=window.matchMedia(M);return o.addEventListener("change",m=>{_(c,m.matches)}),()=>o.removeEventListener("change",_)},[]);const u=v(Yn),f=v(Jn),s=v(Kn),[l,r]=d.useState(),[x,y]=d.useState(null);return d.useLayoutEffect(()=>{try{if(u){console.log(u);const o=[],m=structuredClone(u);m.shift().forEach((j,a)=>{o.push(e.jsx(Qe.Col,{span:a==0?4:8,style:{border:"1px solid black",borderLeft:a==0?"1px solid black":"0",padding:"0",textAlign:"center",...P},children:j.value},O()))}),m.forEach((j,a)=>{o.push(j.map((w,S)=>e.jsx(Qe.Col,{span:S==0?4:1,style:{borderTop:a==0?"":"1px solid black",borderLeft:S==0?"1px solid black":"0",borderBottom:m.length-1==a?"1px solid black":"0",borderRight:"1px solid black",padding:"0",textAlign:"center",background:w.hasOwnProperty("selected")&&w.selected>0?"rgb(34, 139, 230)":"transparent",...P},children:w.value},O())))}),r(o)}if(s){const o=s.map(m=>e.jsx("tr",{children:m.map((j,a)=>e.jsx("td",{style:{border:"1px solid black",textAlign:a>0?"center":"",...P},children:j.value==null||j.value==null?"-":j.value},O()))},O()));y(o)}}catch(o){console.log("COEFLOADCAPACITYTABLE ERROR"),console.log(o)}},[u,f,s]),e.jsxs(i,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx(i,{sx:{...A,textAlign:"center"},children:f}),e.jsx(Qe,{style:{width:"99.8%",margin:"2% 0"},children:l}),e.jsxs(ie,{style:{margin:"1% 0"},children:[e.jsx("thead",{}),e.jsx("tbody",{children:x})]})]})},oi=({width:t,height:c})=>{const u=G(),f=v(qn),s=v(Xn),l=v(el),[r,x]=d.useState(),[y,o]=d.useState();let m=null;const j=(p,T)=>{let n=[];p==="dz"&&(x(T),n=m.data.filter(b=>b.mode!=="none"&&b.visible===!0).map(b=>`${b.name}_dz`)),p==="pdz"&&(o(T),n=m.data.filter(b=>b.mode!=="none"&&b.visible===!0).map(b=>`${b.name}_pdz`)),m.data.forEach(b=>{n.includes(b.customType)&&(b.visible=T)}),u(It(m.data)),u(Mt(m.layout))},a=p=>{setTimeout(()=>{try{let T=p.data[p.curveNumber];w(p),m.data.forEach(n=>{n.customType===`${T.name}_dz`&&(n.visible=!!(r&&T.visible===!0)),n.customType===`${T.name}_pdz`&&(n.visible=!!(y&&T.visible===!0))}),u(It(m.data)),u(Mt(m.layout))}catch(T){console.log("TEMPERATURE TAB ERROR"),console.log(T)}},500)},w=p=>{se(p,m.layout),te(m.layout)},S=J();return d.useEffect(()=>{var p,T;S.url!==null&&S.url.length>0&&(f===D.idle||f===D.error?S.codeTab==="loadcapacity"&&u(bs(S)):S.codeTab==="loadcapacity"&&(x(((p=l.find(n=>{var b;return((b=n==null?void 0:n.customType)==null?void 0:b.includes("dz"))&&n.visible===!0}))==null?void 0:p.visible)??!1),o(((T=l.find(n=>{var b;return((b=n==null?void 0:n.customType)==null?void 0:b.includes("pdz"))&&n.visible===!0}))==null?void 0:T.visible)??!1)))},[S.url]),f===D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{children:[e.jsx(i,{sx:{display:"flex",alignItems:"center"},children:e.jsx(ee,{limitVisibleHandler:j,isDisplayDz:r,isDisplayPdz:y})}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(Q,{useResizeHandler:!0,data:structuredClone(l),layout:{...structuredClone(s),width:t/100*69,height:c},config:W.GetConfig(),onUpdate:p=>m=p,onLegendClick:p=>a(p)}),e.jsx(i,{sx:{width:"30%",height:`${c}px`,overflowY:"scroll"},children:e.jsx(li,{})})]})]})},ii=({width:t,height:c})=>{const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const n=window.matchMedia(M);return n.addEventListener("change",b=>_(f,b.matches)),()=>n.removeEventListener("change",_)},[]);const s=G(),l=v(tl),r=v(sl),x=v(al),[y,o]=d.useState(),[m,j]=d.useState();let a=null;const w=(n,b)=>{let h=[];n==="dz"&&(o(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_dz`)),n==="pdz"&&(j(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_pdz`)),a.data.forEach(g=>{h.includes(g.customType)&&(g.visible=b)}),s(_t(a.data)),s(Pt(a.layout))},S=n=>{setTimeout(()=>{let b=n.data[n.curveNumber];try{p(n),a.data.forEach(h=>{h.customType===`${b.name}_dz`&&(h.visible=!!(y&&b.visible===!0)),h.customType===`${b.name}_pdz`&&(h.visible=!!(m&&b.visible===!0))})}catch(h){console.log("GASES TAB ERROR"),console.log(h)}s(_t(a.data)),s(Pt(a.layout))},500)},p=n=>{se(n,a.layout),te(a.layout)},T=J();return d.useEffect(()=>{var n,b;T.url!==null&&T.url.length>0&&(l===D.idle||l===D.error?T.codeTab==="ltc"&&s(Ss(T)):T.codeTab==="ltc"&&(o(((n=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("dz"))&&h.visible===!0}))==null?void 0:n.visible)??!1),j(((b=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("pdz"))&&h.visible===!0}))==null?void 0:b.visible)??!1)))},[T.url]),l===D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{children:[e.jsx(i,{sx:{display:"flex",alignItems:"center"},children:e.jsx(ee,{limitVisibleHandler:w,isDisplayDz:y,isDisplayPdz:m})}),e.jsx(Q,{useResizeHandler:!0,data:structuredClone(x),layout:{...structuredClone(r),width:t,height:c},config:W.GetConfig(),onUpdate:n=>a=n,onLegendClick:n=>S(n)})]})},ri=({width:t,height:c})=>{const[u,f]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const n=window.matchMedia(M);return n.addEventListener("change",b=>_(f,b.matches)),()=>n.removeEventListener("change",_)},[]);const s=G();v(ne);const l=v(nl);v(He),v(Ge),v(rt),v(ct);const r=v(ll),x=v(ol),[y,o]=d.useState(),[m,j]=d.useState();let a=null;const w=(n,b)=>{let h=[];n==="dz"&&(o(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_dz`)),n==="pdz"&&(j(b),h=a.data.filter(g=>g.mode!=="none"&&g.visible===!0).map(g=>`${g.name}_pdz`)),a.data.forEach(g=>{h.includes(g.customType)&&(g.visible=b)}),s(At(a.data)),s($t(a.layout))},S=n=>{setTimeout(()=>{let b=n.data[n.curveNumber];try{p(n),a.data.forEach(h=>{h.customType===`${b.name}_dz`&&(h.visible=!!(y&&b.visible===!0)),h.customType===`${b.name}_pdz`&&(h.visible=!!(m&&b.visible===!0))})}catch(h){console.log("GASES TAB ERROR"),console.log(h)}s(At(a.data)),s($t(a.layout))},500)},p=n=>{se(n,a.layout),te(a.layout)},T=J();return d.useEffect(()=>{var n,b;T.url!==null&&T.url.length>0&&(l===D.idle||l===D.error?T.codeTab==="power"&&s(fs(T)):T.codeTab==="power"&&(o(((n=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("dz"))&&h.visible===!0}))==null?void 0:n.visible)??!1),j(((b=x.find(h=>{var g;return((g=h==null?void 0:h.customType)==null?void 0:g.includes("pdz"))&&h.visible===!0}))==null?void 0:b.visible)??!1)))},[T.url]),l===D.loading?e.jsx(Y,{height:75}):e.jsxs(i,{children:[e.jsx(i,{sx:{display:"flex",alignItems:"center"},children:e.jsx(ee,{limitVisibleHandler:w,isDisplayDz:y,isDisplayPdz:m})}),e.jsx(Q,{useResizeHandler:!0,data:structuredClone(x),layout:{...structuredClone(r),width:t,height:c},config:W.GetConfig(),onUpdate:n=>a=n,onLegendClick:n=>S(n)})]})},ci=()=>{const[t,c]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const S=window.matchMedia(M);return S.addEventListener("change",p=>_(c,p.matches)),()=>S.removeEventListener("change",_)},[]);const u=G(),f=v(N),s=v(il),l=v(He),r=v(Ge),[x,y]=d.useState(null),[o,m]=d.useState(null);d.useLayoutEffect(()=>{try{if(s&&l){const S=s.find(p=>p.asset_type===l.elementType).tabs;m(S),r?y(r):s&&(y(S[0]),u(Ee(S[0])),u(me("charts")))}}catch(S){console.log("Tabs chart ERROR"),console.log(S)}},[l,r,s]),d.useEffect(()=>()=>{u(Ee(null)),u(me(null))},[]);const j=S=>{u(Ee(S)),y(S)},a=d.useRef(null),w=Be(a);return e.jsx(i,{ref:a,sx:{height:"80vh"},children:e.jsxs(H,{value:x,onTabChange:S=>j(S),styles:{root:{marginTop:"2px"},tab:{...P,fontSize:t?"0.8em":"1em",color:"#003274","&:hover":{background:"#003274",color:"white"}}},children:[e.jsxs(H.List,{children:[e.jsx(H.Tab,{style:{display:o&&o.includes("gases")?"block":"none"},value:"gases",children:f.gasesLabel}),e.jsx(H.Tab,{style:{display:o&&o.includes("power")?"block":"none"},value:"power",children:f.powerLabel}),e.jsx(H.Tab,{style:{display:o&&o.includes("overvoltage")?"block":"none"},value:"overvoltage",children:f.overvoltageLabel}),e.jsx(H.Tab,{style:{display:o&&o.includes("loadcapacity")?"block":"none"},value:"loadcapacity",children:f.loadCapacityLabel}),e.jsx(H.Tab,{style:{display:o&&o.includes("humidity")?"block":"none"},value:"humidity",children:f.moistureLabel}),e.jsx(H.Tab,{style:{display:o&&o.includes("temperature")?"block":"none"},value:"temperature",children:f.temperatureLabel}),e.jsx(H.Tab,{style:{display:o&&o.includes("bushing")?"block":"none"},value:"bushing",children:f.bushingLabel}),e.jsx(H.Tab,{style:{display:o&&o.includes("wear")?"block":"none"},value:"wear",children:f.ageingLabel}),e.jsx(H.Tab,{style:{display:o&&o.includes("its")?"block":"none"},value:"its",children:f.health}),e.jsx(H.Tab,{style:{display:o&&o.includes("sf6")?"block":"none"},value:"sf6",children:f.sf6Label}),e.jsx(H.Tab,{style:{display:o&&o.includes("pd")?"block":"none"},value:"pd",children:f.partialDischargeLabel}),e.jsx(H.Tab,{style:{display:o&&o.includes("ltc")?"block":"none"},value:"ltc",children:f.ltcLabel})]}),e.jsx(H.Panel,{value:"gases",pt:"xs",children:e.jsx(Vo,{width:w.width,height:w.height-50})}),e.jsx(H.Panel,{value:"power",pt:"xs",children:e.jsx(ri,{width:w.width,height:w.height-50})}),e.jsx(H.Panel,{value:"overvoltage",pt:"xs",children:e.jsx(Yo,{width:w.width,height:w.height-80})}),e.jsx(H.Panel,{value:"loadcapacity",pt:"xs",children:e.jsx(oi,{width:w.width,height:w.height-50})}),e.jsx(H.Panel,{value:"humidity",pt:"xs",children:e.jsx(qo,{width:w.width,height:w.height-50})}),e.jsx(H.Panel,{value:"temperature",pt:"xs",children:e.jsx(Xo,{width:w.width,height:w.height-50})}),e.jsx(H.Panel,{value:"bushing",pt:"xs",children:e.jsx(si,{width:w.width,height:w.height-50})}),e.jsx(H.Panel,{value:"its",pt:"xs",children:e.jsx(ei,{width:w.width,height:w.height-50})}),e.jsx(H.Panel,{value:"wear",pt:"xs",children:e.jsx(ti,{width:w.width,height:w.height-50})}),e.jsx(H.Panel,{value:"pd",pt:"xs",children:e.jsx(ai,{width:w.width,height:w.height})}),e.jsx(H.Panel,{value:"sf6",pt:"xs",children:e.jsx(ni,{width:w.width,height:w.height})}),e.jsx(H.Panel,{value:"ltc",pt:"xs",children:e.jsx(ii,{width:w.width,height:w.height-50})})]})})},Zt=()=>{const t=Re(),c=G(),u=v(ss);return d.useLayoutEffect(()=>{(u===D.idle||u===D.error)&&c(ns()).then(f=>{const s=f.payload.substations.find(l=>l.id==+t.id);c(qt({...s,subst_id:s.id})),c(qe({id:t.assetid,isTimer:!1})).then(l=>{c(Oe({asset:l.payload.asset_name,elementId:l.payload.assetId,elementType:l.payload.asset_type,substId:+t.id})),c(Ee("gases")),c(me("charts"))})})},[]),u===D.loading?e.jsx(Y,{height:90}):e.jsxs(i,{sx:{width:"100%"},children:[e.jsx(i,{sx:{height:"4%",padding:"0 1%"},children:e.jsx(Do,{})}),e.jsx(ci,{})]})},di=()=>{const t=G(),c=v(N),u=v(Ls),f=v(Ie),[s,l]=d.useState(null),[r,x]=d.useState(null),[y,o]=d.useState(null),m=d.useRef(null),j=Be(m);d.useLayoutEffect(()=>{j!==null&&o({width:j.width,height:j.height})},[j.width,j.height]);const[a,w]=d.useState();d.useEffect(()=>{if(u){const T=f==null?void 0:f.schema;if(T!=null){l(T);const n=u.map(b=>{var h;return e.jsx(X,{label:b.name,withArrow:!0,position:"right",styles:{tooltip:{background:"#003274",color:"white"}},children:e.jsx(at,{to:`/substation/${f.subst_id}/${b.asset_type}/${b.asset_id}`,style:{position:"absolute",left:`${b.on_scheme_x}%`,top:`${b.on_scheme_y}%`},onClick:()=>t(Oe({asset:b.name,elementId:b.asset_id,elementType:b.asset_type,substId:f.subst_id})),children:e.jsx(et,{src:(h=oe.find(g=>g.title===b.status))==null?void 0:h.icon,width:j.width/100*4,height:j.width/100*4})},O())},O())});w(n)}else l(null)}},[u]);const S=()=>{let T,n,b=r.width/r.height,h=y.width/y.height;return b>h?(T=y.width,n=r.height*(y.width/r.width)):(n=y.height,T=r.width*(y.height/r.height)),{width:T,height:n}};let p=null;return r!==null&&y!==null&&(p=S()),s==null?e.jsx(i,{ref:m,sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflowY:"auto"},children:e.jsx(i,{sx:{...Z,...A},children:c.substSchemaNotInstalledLabel})}):e.jsxs(i,{ref:m,sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflowY:"auto",position:"relative"},children:[e.jsx(Is,{imageUrl:s,cbGetSize:x}),e.jsx(i,{sx:{position:"absolute",width:`${p!==null?p.width:0}px`,height:`${p!==null?p.height:0}px`},children:a})]})},ui=()=>{const[t,c]=d.useState(window.matchMedia(M).matches);d.useEffect(()=>{const n=window.matchMedia(M);return n.addEventListener("change",b=>_(c,b.matches)),()=>n.removeEventListener("change",_)},[]);const u=Xe(),f=G(),s=v(ne),l=v(N),r=v(Ie),x=v(Ls),[y,o]=d.useState(["All"]),[m,j]=d.useState([]),[a,w]=d.useState([]),S=d.useRef(null);d.useEffect(()=>{try{const n={showlegend:!1,xaxis:{showgrid:!1,zeroline:!1,showticklabels:!1,type:"date",tickformat:"%Y-%m-%d %H:%M",hoverformat:"%Y-%m-%d %H:%M"},yaxis:{showgrid:!1,zeroline:!1,showticklabels:!1},margin:{l:1,r:1,t:1,b:1}};if(r){const b=x.map(h=>{var F,L;const g=((F=S.current)==null?void 0:F.clientWidth)/100*50,I=((L=S.current)==null?void 0:L.clientHeight)/100*5,z=[{x:h.tci_period.map(R=>R[0]),y:h.tci_period.map(R=>R[1]),type:"scatter",mode:"lines",line:{color:"rgba(28, 165, 26, 0.8)",width:2,shape:"spline",smoothing:.5}}];return{state:h.status,asset:h.name,its:e.jsx(i,{id:"1",sx:{margin:"5px 0px",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(i,{sx:{margin:"0 1%",fontSize:"0.9em",fontFamily:P.fontFamily},children:h.tci_last}),e.jsx(Q,{useResizeHandler:!0,data:z,layout:{...structuredClone(n),width:g,height:I},config:{...W.GetConfig(),scrollZoom:!1,staticPlot:!1,dragmode:""}})]})}),elementType:h.asset_type,elementId:h.asset_id,stateInner:h.status,level:oe.find(R=>R.title===h.status).levelState,substId:r.subst_id}}).sort(function(h,g){return h.level>g.level?1:h.level<g.level?-1:0});j(b)}l&&w([{value:"All",label:l.allLabel},{value:"Good",label:l.normalLabel},{value:"Dangerous",label:l.dangerousLabel},{value:"Warning",label:l.warningLabel}])}catch{}},[r,s,x]);const p=d.useMemo(()=>[{accessorKey:"asset",header:l.assetLabel,size:0,enableSorting:!1,Cell:({cell:n})=>e.jsxs(i,{sx:{width:"95%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0",fontSize:"1.1em"},children:[e.jsx(i,{sx:{padding:"5px"},children:n.row.original.asset}),e.jsx(et,{src:oe.find(b=>b.title===n.row.original.state).icon,height:30,width:30})]})},{accessorKey:"its",header:l.health,filterFn:"contains",enableSorting:!1}],[s]),T=Yt({columns:p,data:m??[],enablePagination:!1,enableColumnActions:!1,enableFullScreenToggle:!1,enableDensityToggle:!1,enableColumnFilters:!1,localization:l,enableHiding:!1,initialState:{showGlobalFilter:!0},filterFns:{myCustomFilterFn:(n,b,h)=>{if(n.original.asset.toLowerCase().includes(h.toLowerCase()))return n}},globalFilterFn:"myCustomFilterFn",mantinePaperProps:{sx:{height:"calc(100% - 2%)",cursor:"pointer",overflowY:"auto"}},mantineTableProps:{highlightOnHover:!1,withColumnBorders:!1,h:m.length<=1?100:"",sx:{"thead > tr > th":{backgroundColor:"inherit",color:"#003274",...A,fontSize:t?"0.8em":"1em"},"tbody > tr > td":{padding:"0",backgroundColor:"inherit",color:"#003274",...P,fontSize:t?"0.8em":"1em"}}},mantineTableBodyCellProps:({cell:n})=>({onClick:b=>{f(Oe({asset:n.row.original.asset,elementId:n.row.original.elementId,elementType:n.row.original.elementType,substId:n.row.original.substId})),u(`/substation/${n.row.original.substId}/${n.row.original.elementType}/${n.row.original.elementId}`)}}),mantineTableHeadCellProps:{align:"center"},mantineTopToolbarProps:{sx:{".mantine-1knjhw7":{display:"block"}}},mantineSearchTextInputProps:{placeholder:l.serchByAssetLabel,sx:{width:"26vw"}},renderTopToolbarCustomActions:({table:n})=>e.jsxs(i,{sx:{display:"flex",alignItems:"center",marginBottom:"15px",...A,color:"rgb(0, 50, 116)",borderBottom:"1px solid gray"},children:[e.jsx(i,{sx:{marginRight:"5px"},children:l.statusLabel}),e.jsx(Js,{styles:{root:{width:"100%"},item:{color:"rgb(0, 50, 116)",...P},values:{color:"rgb(0, 50, 116)",...P}},transitionProps:{duration:300,transition:"pop-top-left",timingFunction:"ease"},data:a,value:y,onChange:b=>{const g=(b.includes("All")?x:x.filter(I=>b.includes(I.status))).map(I=>({state:I.status,asset:I.name,its:e.jsxs(i,{sx:{textAlign:"center"},children:[e.jsx(i,{children:I.tci_last}),e.jsx(Ks,{value:I.tci_last,styles:{root:{background:"gray"}}})]}),elementType:I.asset_type,elementId:I.asset_id,stateInner:I.status,level:oe.find(z=>z.title===I.status).levelState,substId:r.subst_id})).sort(function(I,z){return I.level>z.level?1:I.level<z.level?-1:0});j(g),o(b)},variant:"unstyled"})]})});return e.jsxs(i,{ref:S,sx:{width:"100%",height:"calc(100% - 2%)",color:"#003274",padding:"1% 0"},children:[e.jsx(i,{sx:{display:"flex",alignItems:"center",justifyContent:"space-around"},children:e.jsx(i,{sx:{...A,fontSize:t?"1em":"1.5em"},children:r==null?void 0:r.name})}),e.jsx(Jt,{table:T})]})},hi=()=>{const t=Re(),c=G(),u=v(Ie),f=v(rl);d.useLayoutEffect(()=>{(f===D.idle||f===D.error||(u==null?void 0:u.subst_id)!==+t.id)&&c(Ot(+t.id))},[c,t.id]);const s=v(lt);return ot(()=>{c(Ot(+t.id))},s),e.jsxs(i,{sx:{display:"flex",height:"100%"},children:[e.jsx(i,{sx:{width:"15%",height:"100%"},children:e.jsx(as,{})}),e.jsx(i,{sx:{width:"58%",height:"100%"},children:e.jsx(i,{sx:{width:"100%",height:"100%"},children:e.jsx(di,{})})}),e.jsx(i,{sx:{width:"27%",height:"100%"},children:e.jsx(ui,{})})]})},Ye=({productName:t,productLink:c,licenseName:u,licenseLinkText:f,copyrightText:s})=>e.jsx(i,{children:e.jsxs(i,{sx:{margin:"1% 0",color:"#003274",fontSize:"1.2em",textAlign:"center",...P},children:[e.jsxs(i,{children:[t,"  (",e.jsx("a",{target:"_blank",href:c,children:c}),")"]}),e.jsxs(i,{children:[u,"  (",e.jsx("a",{target:"_blank",href:f,children:f}),")"]}),e.jsx(i,{children:s})]})}),gi="2025-03-18T08:43:22.012Z",fi={buildDate:gi},bi=()=>{const t=v(N),c=fi.buildDate.split("T")[0].replaceAll("-","");return e.jsxs(i,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs(i,{sx:{color:"#003274",textAlign:"center"},children:[e.jsx(i,{sx:{...A,fontSize:"2em"},children:t.headerLabelText}),e.jsxs(i,{sx:{...P},children:[t.buildLabel,": ",c]})]}),e.jsxs(i,{sx:{margin:"1% 0",...A,color:"#003274",fontSize:"1.2em"},children:[t.useMaterialsLabel,":"]}),e.jsxs(i,{sx:{width:"50%"},children:[e.jsx(Ye,{productName:"Mantine",productLink:"https://mantine.dev/",licenseName:"MIT License",licenseLinkText:"https://opensource.org/license/mit",copyrightText:"Copyright (c) 2021 Vitaly Rtishchev"}),e.jsx(Ye,{productName:"OpenLayers",productLink:"https://openlayers.org/",licenseName:"BSD 2-Clause License",licenseLinkText:"https://opensource.org/license/bsd-2-clause",copyrightText:"Copyright 2005-present, OpenLayers Contributors All rights reserved"}),e.jsx(Ye,{productName:"idb",productLink:"github.com/jakearchibald/idb#readme",licenseName:"ISC License",licenseLinkText:"https://github.com/jakearchibald/idb#ISC-1-ov-file",copyrightText:"Copyright (c) 2016, Jake Archibald <jaffathecake@gmail.com>"})]})]})},xi=(t,c,u)=>`${Pe}/modelsStats?assetGuid=${t}&dateStart=${c.toJSON()}&dateEnd=${u.toJSON()}`,mi=(t,c,u,f)=>`${Pe}/modelStats?assetGuid=${t}&modelCode=${c}&dateStart=${u.toJSON()}&dateEnd=${f.toJSON()}`;function pi(t){const c=v(N),[u,f]=d.useState(null),[s,l]=d.useState(!1),r=v(Cs),x=v(Ds),y=v(zs),o=ze(()=>fetch(mi(r,u,x,y)).then(p=>p.json()).then(p=>p.stats),[]),m=[{id:"code",header:c.codeLabel||"Code",accessorFn:p=>p.code!==null?e.jsx(i,{px:2,children:p.diagnostic}):null},{id:"lastStats",header:c.lastStatsLabel||"Status",accessorFn:p=>p.code!==null?e.jsx(i,{px:2,children:e.jsx(qs,{color:p.message?"red":"green"})}):null},{id:"last_message",accessorKey:"message",header:c.errorMessageLabel||"Error Message"},{id:"last_datetime",header:c.datetimeLabel||"Datetime",minSize:75,accessorFn:p=>p.timestamp?Gt(p.timestamp):null},{id:"chart_button",header:c.chartLabel||"Chart",minSize:10,maxSize:30,accessorFn:p=>e.jsx(Vt,{onClick:()=>{l(!0),f(p.diagnostic)},sx:{background:"#003274"},children:e.jsx(Xs,{})})}],j=Yt({columns:m,data:t.modelsStatsApi.data||[],enableExpanding:!1,enableExpandAll:!1,enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,state:{density:"compact",showLoadingOverlay:t.modelsStatsApi.loading,showSkeletons:t.modelsStatsApi.loading},striped:!0,mantineTableProps:{striped:!0},enableTopToolbar:!1,enableBottomToolbar:!1,getRowId:p=>p.code,mantineTableBodyCellProps:({})=>({sx:{padding:"0 10px"}}),mantineTableBodyRowProps:({})=>({onClick:()=>{},sx:{cursor:"pointer"}})});d.useEffect(()=>{s&&o.apiCaller()},[s]);const a=d.useRef(null),w=cl(a),S=d.forwardRef((p,T)=>e.jsxs(nt,{opened:s,onClose:()=>{l(!1)},title:"Запуски модели",centered:!0,size:"calc(100vw - 3rem)",overlayProps:{blur:1},sx:{"& .mantine-Modal-inner":{padding:"5dvh 0"}},children:[o.loading&&e.jsx(ke,{size:36,sx:{margin:"auto",display:"block"}}),!o.loading&&o.data.length===0&&e.jsx(ea,{c:"dimmed",sx:{textAlign:"center"},children:c.notDataLabel||"No data"}),!o.loading&&o.data.length>0&&e.jsx(Q,{useResizeHandler:!0,data:[{x:o.data.map(n=>Gt(n.timestamp))||[],y:o.data.map(n=>n.message==="")||[],text:o.data.map(n=>n.message)||[],mode:"lines+markers",name:"vh",line:{shape:"vh"},type:"scatter"}],layout:{title:`${u}`,width:w.width-100,height:w.height-200,showlegend:!1},config:{...W.GetConfig(),displayModeBar:!1,fluid:!0}})]}));return e.jsxs(e.Fragment,{children:[e.jsx(S,{}),e.jsx(ta,{order:4,my:10,children:c.modelsLabel||"Модели"}),e.jsx(Jt,{table:j})]})}const yi=()=>{const t=Xe(),{tabValue:c}=Re(),u=G(),f=v(N)||{},s=v(Cs),l=v(Ds),r=v(zs),x=ze(()=>fetch(xl()).then(w=>w.json()).then(w=>w.assets)),y=ze(()=>fetch(dl()).then(w=>w.json()).then(w=>w.protocols),[]);d.useEffect(()=>{x.apiCaller(),y.apiCaller()},[]);const o=ze(()=>fetch(xi(s,l,r)).then(w=>w.json()).then(w=>w.stats),[]),m=ze(()=>fetch(ul(s,l,r)).then(w=>w.json()).then(w=>w.devices),[]);d.useEffect(()=>{s&&(o.apiCaller(),m.apiCaller())},[s]),d.useEffect(()=>{c==="models"&&o.apiCaller()},[c]);const j=w=>{u(ml(w)),w!==s&&u(pl(null))},a=()=>{m.apiCaller(),o.apiCaller()};return e.jsxs(sa,{fluid:!0,sx:{...hl,marginTop:"10px",color:"#003274"},children:[e.jsx(aa,{data:gl(x.data),value:s,onChange:j,miw:250,maw:400,placeholder:f.assetNavLabel||"asset",rightSection:x.loading&&e.jsx(ke,{size:18}),sx:{padding:"20px 0 0 0"}}),e.jsx(fl,{onApplyClick:a,deviceStatsApi:m}),e.jsxs(H,{value:c,onTabChange:w=>t(`/dataCollect/${w}`),keepMounted:!1,styles:{root:{marginTop:"2px"},tab:{...P,color:"#003274","&:hover":{background:"#003274",color:"white"}}},children:[e.jsxs(H.List,{sx:{color:"#003274"},children:[e.jsx(H.Tab,{value:"signals",children:f.signalsLabel||"Сигналы"}),e.jsx(H.Tab,{value:"models",children:f.modelsLabel||"Модели"})]}),e.jsx(H.Panel,{value:"signals",pt:"xs",pb:"xs",children:e.jsx(bl,{deviceStatsApi:m,protocolsApi:y})}),e.jsx(H.Panel,{value:"models",pt:"xs",pb:"xs",children:e.jsx(pi,{modelsStatsApi:o})})]})]})},vi=()=>e.jsx(na,{children:e.jsxs(ae,{path:"/",element:e.jsx(yl,{}),children:[e.jsx(ae,{index:!0,element:e.jsx(xo,{})}),e.jsx(ae,{path:"substation/:id",element:e.jsx(hi,{})}),e.jsx(ae,{path:"substation/:id/transformer/:assetid",element:e.jsx(Nt,{})}),e.jsx(ae,{path:"substation/:id/transformer/:assetid/charts",element:e.jsx(Zt,{})}),e.jsx(ae,{path:"substation/:id/gis/:assetid",element:e.jsx(Nt,{})}),e.jsx(ae,{path:"substation/:id/gis/:assetid/charts",element:e.jsx(Zt,{})}),e.jsx(ae,{path:"about",element:e.jsx(bi,{})}),e.jsxs(ae,{path:"dataCollect/",element:e.jsx(la,{}),children:[e.jsx(ae,{index:!0,element:e.jsx(oa,{to:"signals",replace:!0})}),e.jsx(ae,{path:":tabValue",element:e.jsx(yi,{})})]})]})}),wi=new ia;function ji(){const t=v(N);try{document.title=t.headerLabelText}catch{console.log("GET TRANSLATIONS ERROR"),console.log(t)}return e.jsx(i,{sx:{width:"100%",height:"100vh"},children:t==null?e.jsx(i,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",...Z,...A},children:"Could not receive translation"}):e.jsxs(ra,{client:wi,children:[e.jsx(ca,{limit:5,autoClose:2e3}),e.jsx(vi,{})]})})}const Je=da({reducer:{selectedSubstation:vl,selectedEquipment:wl,substations:jl,subChartsTabGases:Tl,tabsController:Sl,tabMoisture:Ll,tabOvervoltage:Cl,tabTemperature:Dl,subTabRD:zl,subTabSTO:Fo,subTabRDNomogram:El,subTabDuvaleTriangle:kl,subTabDuvalePentagon:Rl,tabBushing:Hl,tabWear:Il,tabItc:Ml,tabPD:_l,tabSF6:Pl,tabHysteresus:Al,tabLoadCapacity:$l,tabLTC:Ol,tabPower:Gl,filterStats:Bl,currentLocale:Nl},middleware:t=>t({serializableCheck:!1})}),Ti=ua(document.getElementById("root"));Je.dispatch(Fl()).then(()=>{Je.dispatch(Zl())}).then(()=>{Ti.render(e.jsx(ha,{store:Je,children:e.jsx(ga,{children:e.jsx(ji,{})})}))});
